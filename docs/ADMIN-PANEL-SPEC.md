# Admin-Panel - Fragen-Katalog Management System

## ğŸ¯ Ziel

Ein **vollstÃ¤ndiges, benutzerfreundliches Admin-Panel** zum Verwalten von Kategorien und dynamischen Fragen fÃ¼r den Experience-Submission-Flow.

### Kern-Features:
- âœ… **Drag & Drop** Reihenfolge
- âœ… **Live-Preview** (wie User es sieht)
- âœ… **Analytics-Dashboard** (Antwort-Raten, Insights)
- âœ… **Templates** (wiederverwendbare Fragen-Sets)
- âœ… **Versionierung** (Change-History)
- âœ… **Permissions** (3 User-Rollen)
- âœ… **Conditional Logic** (Zeige nur wenn...)
- âœ… **Bulk-Operations** (Mehrfach-Aktionen)

---

## ğŸ‘¥ User-Rollen

### **1. Super-Admin**
```
Kann alles:
âœ… Kategorien erstellen/bearbeiten/lÃ¶schen
âœ… Fragen erstellen/bearbeiten/lÃ¶schen
âœ… User-Permissions verwalten
âœ… Templates erstellen
âœ… Analytics ansehen
âœ… System-Einstellungen
```

### **2. Content-Manager**
```
Kann Content verwalten:
âœ… Fragen erstellen/bearbeiten
âœ… Kategorien bearbeiten (nicht lÃ¶schen)
âœ… Templates erstellen/verwenden
âœ… Analytics ansehen
âŒ User-Permissions
âŒ Kategorien lÃ¶schen
```

### **3. Analyst**
```
Nur Lesezugriff:
âœ… Kategorien ansehen
âœ… Fragen ansehen
âœ… Analytics ansehen & exportieren
âŒ Editieren
âŒ LÃ¶schen
```

---

## ğŸ—ï¸ System-Architektur

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ADMIN UI (Next.js)                  â”‚
â”‚  React Components + Drag & Drop             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   API Routes      â”‚
         â”‚  (Next.js API)    â”‚
         â”‚  + Permissions    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Supabase PostgreSQL       â”‚
    â”‚  + RLS Policies             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ UI-Screens (Detailliert)

### Screen 1: Dashboard-Ãœbersicht

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  XP-Share Admin                     [@admin] ğŸ”” Abmeldenâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚               â”‚                                         â”‚
â”‚ ğŸ“Š Dashboard  â”‚  ğŸ“Š Fragen-Katalog Dashboard            â”‚
â”‚ ğŸ“‚ Kategorien â”‚                                         â”‚
â”‚ â“ Fragen     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ ğŸ“Š Analytics  â”‚  â”‚ 8 Kategorien â”‚  â”‚ 47 Fragen    â”‚   â”‚
â”‚ ğŸ“‹ Templates  â”‚  â”‚              â”‚  â”‚              â”‚   â”‚
â”‚ ğŸ‘¥ Permissionsâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚ ğŸ“œ History    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚               â”‚  â”‚ 1.2k Antwortenâ”‚  â”‚ 87% Rate     â”‚   â”‚
â”‚               â”‚  â”‚ (7 Tage)     â”‚  â”‚ (Durchschnittâ”‚   â”‚
â”‚               â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚               â”‚                                         â”‚
â”‚               â”‚  Kategorien-Ãœbersicht:                  â”‚
â”‚               â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚               â”‚  â”‚ ğŸ“‚ UFO                    [â–¶]   â”‚   â”‚
â”‚               â”‚  â”‚    5 Fragen | 89% Rate          â”‚   â”‚
â”‚               â”‚  â”‚    [Bearbeiten] [Analytics]     â”‚   â”‚
â”‚               â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚               â”‚  â”‚ ğŸ“‚ Paranormal             [â–¶]   â”‚   â”‚
â”‚               â”‚  â”‚    6 Fragen | 84% Rate          â”‚   â”‚
â”‚               â”‚  â”‚    [Bearbeiten] [Analytics]     â”‚   â”‚
â”‚               â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚               â”‚  â”‚ ğŸ“‚ TrÃ¤ume                 [â–¶]   â”‚   â”‚
â”‚               â”‚  â”‚    5 Fragen | 92% Rate          â”‚   â”‚
â”‚               â”‚  â”‚    [Bearbeiten] [Analytics]     â”‚   â”‚
â”‚               â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚               â”‚                                         â”‚
â”‚               â”‚  [+ Neue Kategorie]                     â”‚
â”‚               â”‚                                         â”‚
â”‚               â”‚  Letzte Ã„nderungen:                     â”‚
â”‚               â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚               â”‚  â”‚ â€¢ admin1 hat UFO>Bewegung       â”‚   â”‚
â”‚               â”‚  â”‚   bearbeitet (vor 2h)           â”‚   â”‚
â”‚               â”‚  â”‚                                 â”‚   â”‚
â”‚               â”‚  â”‚ â€¢ admin2 hat neue Frage "Farbe" â”‚   â”‚
â”‚               â”‚  â”‚   zu UFO hinzugefÃ¼gt (vor 5h)   â”‚   â”‚
â”‚               â”‚  â”‚                                 â”‚   â”‚
â”‚               â”‚  â”‚ â€¢ System: Analytics aktualisiertâ”‚   â”‚
â”‚               â”‚  â”‚   (vor 1 Tag)                   â”‚   â”‚
â”‚               â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚               â”‚                                         â”‚
â”‚               â”‚  Quick-Actions:                         â”‚
â”‚               â”‚  [ğŸ“¥ Export alles (JSON)]               â”‚
â”‚               â”‚  [ğŸ“Š WÃ¶chentlicher Report]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- KPIs (Kategorien, Fragen, Antworten, Rate)
- Kategorien-Liste mit Quick-Actions
- Activity-Feed (letzte Ã„nderungen)
- Quick-Export

---

### Screen 2: Kategorie-Detail & Fragen-Manager

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Dashboard                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  ğŸ“‚ Kategorie: UFO-Sichtungen              [Bearbeiten]â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Kategorie-Info:                                 â”‚   â”‚
â”‚  â”‚ â€¢ Slug: ufo                                     â”‚   â”‚
â”‚  â”‚ â€¢ Icon: ğŸ›¸                                      â”‚   â”‚
â”‚  â”‚ â€¢ Status: âœ… Aktiv                              â”‚   â”‚
â”‚  â”‚ â€¢ Erstellt: 15.01.2025 von @admin1              â”‚   â”‚
â”‚  â”‚ â€¢ Letzte Ã„nderung: 20.01.2025 von @admin2       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  Beschreibung:                                          â”‚
â”‚  Unidentifizierte Flugobjekte und auÃŸergewÃ¶hnliche      â”‚
â”‚  Himmelserscheinungen                                   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Fragen (5) - Drag zum Sortieren                â”‚   â”‚
â”‚  â”‚                                         [+ Neu] â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ â‹®â‹® 1. Wie hat es sich bewegt?            [â‹®]  â”‚   â”‚  â† Drag Handle
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚    â”‚ Typ: Chips (Multi-Select)           â”‚    â”‚   â”‚
â”‚  â”‚    â”‚ Optionen (5): Schwebend, Schnell... â”‚    â”‚   â”‚
â”‚  â”‚    â”‚ Optional: âœ“                         â”‚    â”‚   â”‚
â”‚  â”‚    â”‚                                      â”‚    â”‚   â”‚
â”‚  â”‚    â”‚ ğŸ“Š Analytics (30 Tage):             â”‚    â”‚   â”‚
â”‚  â”‚    â”‚    â€¢ Antwort-Rate: 89%              â”‚    â”‚   â”‚
â”‚  â”‚    â”‚    â€¢ Ã˜ Zeit: 8 Sekunden             â”‚    â”‚   â”‚
â”‚  â”‚    â”‚    â€¢ Top-Antwort: "Schnell" (45%)   â”‚    â”‚   â”‚
â”‚  â”‚    â”‚                                      â”‚    â”‚   â”‚
â”‚  â”‚    â”‚ [âœ Bearbeiten] [ğŸ“‹ Duplizieren]     â”‚    â”‚   â”‚
â”‚  â”‚    â”‚ [ğŸ” Preview] [ğŸ—‘ï¸ LÃ¶schen]            â”‚    â”‚   â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ â‹®â‹® 2. Gab es GerÃ¤usche?                  [â‹®]  â”‚   â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚    â”‚ Typ: Chips (Single-Select)          â”‚    â”‚   â”‚
â”‚  â”‚    â”‚ Optionen (5): Summend, Lautlos...   â”‚    â”‚   â”‚
â”‚  â”‚    â”‚ Optional: âœ“                         â”‚    â”‚   â”‚
â”‚  â”‚    â”‚                                      â”‚    â”‚   â”‚
â”‚  â”‚    â”‚ ğŸ“Š Antwort-Rate: 92% | Ã˜ 6s         â”‚    â”‚   â”‚
â”‚  â”‚    â”‚                                      â”‚    â”‚   â”‚
â”‚  â”‚    â”‚ [âœ] [ğŸ“‹] [ğŸ”] [ğŸ—‘ï¸]                   â”‚    â”‚   â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ â‹®â‹® 3. Warst du alleine?                  [â‹®]  â”‚   â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚    â”‚ Typ: Boolean + Follow-Up            â”‚    â”‚   â”‚
â”‚  â”‚    â”‚ Follow-Up: "Wer war dabei?"         â”‚    â”‚   â”‚
â”‚  â”‚    â”‚ Optional: âœ“                         â”‚    â”‚   â”‚
â”‚  â”‚    â”‚                                      â”‚    â”‚   â”‚
â”‚  â”‚    â”‚ ğŸ“Š Antwort-Rate: 78% | Ã˜ 5s         â”‚    â”‚   â”‚
â”‚  â”‚    â”‚ âš ï¸  Niedriger als Durchschnitt!      â”‚    â”‚   â”‚
â”‚  â”‚    â”‚                                      â”‚    â”‚   â”‚
â”‚  â”‚    â”‚ [âœ] [ğŸ“‹] [ğŸ”] [ğŸ—‘ï¸]                   â”‚    â”‚   â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ â‹®â‹® 4. Wie lange hast du es beobachtet?   [â‹®]  â”‚   â”‚
â”‚  â”‚ â‹®â‹® 5. Welche Form hatte es?              [â‹®]  â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ [+ Neue Frage]                                 â”‚   â”‚
â”‚  â”‚ [ğŸ“¥ Aus Template]                              â”‚   â”‚
â”‚  â”‚ [ğŸ“¤ Als Template speichern]                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  Bulk-Actions:                                          â”‚
â”‚  [â˜ Alle auswÃ¤hlen] [Aktivieren] [Deaktivieren]        â”‚
â”‚  [PrioritÃ¤ten neu nummerieren] [Export JSON]            â”‚
â”‚                                                         â”‚
â”‚  [ğŸ” Preview-Modus]  [ğŸ“Š Detaillierte Analytics]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- Kategorie-Info (expandable)
- Drag & Drop Fragen sortieren
- Inline-Analytics pro Frage
- Expandable Cards (Click = Details zeigen)
- Quick-Actions pro Frage
- Bulk-Operations

---

### Screen 3: Fragen-Editor (Modal)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frage bearbeiten                               âœ•       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  FORMULAR                â”‚  LIVE-PREVIEW                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                          â”‚                              â”‚
â”‚ ID: movement-ufo-001     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                          â”‚  â”‚ ğŸ¨ Wie User es sieht:  â”‚ â”‚
â”‚ Frage-Text *             â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                              â”‚
â”‚ â”‚ Wie hat sich das     â”‚ â”‚  Wie hat sich das Objekt    â”‚
â”‚ â”‚ Objekt bewegt?       â”‚ â”‚  bewegt?                    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                              â”‚
â”‚                          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ Frage-Typ *              â”‚  â”‚Schwebendâ”‚ â”‚Schnell â”‚     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚ â”‚ Chips (Multi) [â–¼]    â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚Zick-Zackâ”‚ â”‚Statischâ”‚     â”‚
â”‚                          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚ Typen:                   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚ â€¢ Chips (Single)         â”‚  â”‚Anders  â”‚                  â”‚
â”‚ â€¢ Chips (Multi) âœ“        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚ â€¢ Text                   â”‚                              â”‚
â”‚ â€¢ Boolean                â”‚  ğŸ’¡ Hilfetext erscheint      â”‚
â”‚ â€¢ Slider                 â”‚     hier wenn gesetzt        â”‚
â”‚ â€¢ Date/Time              â”‚                              â”‚
â”‚                          â”‚  [Ãœberspringen]              â”‚
â”‚ Optionen (Chips)         â”‚                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  Desktop â¦¿ Mobile           â”‚
â”‚ â”‚ â‹®â‹® Schwebend    [âœ•]  â”‚ â”‚                              â”‚
â”‚ â”‚ â‹®â‹® Schnell      [âœ•]  â”‚ â”‚  â† Live Update              â”‚
â”‚ â”‚ â‹®â‹® Zick-Zack    [âœ•]  â”‚ â”‚                              â”‚
â”‚ â”‚ â‹®â‹® Statisch     [âœ•]  â”‚ â”‚                              â”‚
â”‚ â”‚ â‹®â‹® Anders       [âœ•]  â”‚ â”‚                              â”‚
â”‚ â”‚ [+ Option]           â”‚ â”‚                              â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                              â”‚
â”‚                          â”‚                              â”‚
â”‚ PrioritÃ¤t (Reihenfolge)  â”‚                              â”‚
â”‚ â”Œâ”€â”€â”€â”                    â”‚                              â”‚
â”‚ â”‚ 1 â”‚ â—€ â–¶               â”‚                              â”‚
â”‚ â””â”€â”€â”€â”˜                    â”‚                              â”‚
â”‚                          â”‚                              â”‚
â”‚ â˜‘ Optional               â”‚                              â”‚
â”‚ â˜ Pflichtfeld            â”‚                              â”‚
â”‚                          â”‚                              â”‚
â”‚ Hilfetext (optional)     â”‚                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                              â”‚
â”‚ â”‚ Auch ungewÃ¶hnliche   â”‚ â”‚                              â”‚
â”‚ â”‚ Bewegungen...        â”‚ â”‚                              â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                              â”‚
â”‚                          â”‚                              â”‚
â”‚ Placeholder (Text-Typ)   â”‚                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                              â”‚
â”‚ â”‚ z.B. "Es schwebte..."â”‚ â”‚                              â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                              â”‚
â”‚                          â”‚                              â”‚
â”‚ â–¼ Erweitert              â”‚                              â”‚
â”‚                          â”‚                              â”‚
â”‚ Conditional Logic        â”‚                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                              â”‚
â”‚ â”‚ Nur zeigen wenn:     â”‚ â”‚                              â”‚
â”‚ â”‚ â˜‘ Zeit nicht erkannt â”‚ â”‚                              â”‚
â”‚ â”‚ â˜ Andere Frage = ... â”‚ â”‚                              â”‚
â”‚ â”‚ â˜ User-Typ = ...     â”‚ â”‚                              â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                              â”‚
â”‚                          â”‚                              â”‚
â”‚ Follow-Up Frage          â”‚                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                              â”‚
â”‚ â”‚ Wenn "Anders":       â”‚ â”‚                              â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚                              â”‚
â”‚ â”‚ â”‚ Beschreibe:      â”‚ â”‚ â”‚                              â”‚
â”‚ â”‚ â”‚ Typ: Text        â”‚ â”‚ â”‚                              â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚                              â”‚
â”‚ â”‚ [+ Follow-Up]        â”‚ â”‚                              â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                              â”‚
â”‚                          â”‚                              â”‚
â”‚ Tags (fÃ¼r Suche)         â”‚                              â”‚
â”‚ #bewegung #ufo #sichtung â”‚                              â”‚
â”‚                          â”‚                              â”‚
â”‚ [Abbrechen] [Speichern]  â”‚                              â”‚
â”‚ [Speichern & Testen â†’]   â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- Split-View (Form + Preview)
- Live-Preview (instant update)
- Drag & Drop Optionen sortieren
- Conditional Logic Builder
- Follow-Up Fragen
- Mobile/Desktop Preview-Toggle
- "Speichern & Testen" â†’ Ã¶ffnet Preview-Modus

---

### Screen 4: Preview-Modus (Fullscreen)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” Preview-Modus: UFO Fragen-Flow                      â”‚
â”‚  [âœ• SchlieÃŸen]  [Desktop â¦¿ Mobile]  [â—€ ZurÃ¼ck] [Weiterâ–¶]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Genau wie User es sieht:                       â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ Schritt 4/5 - UFO Details                 â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                           â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ ğŸ’¡ Ein paar Details (alle optional!)      â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                           â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ Wie hat sich das Objekt bewegt?          â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â”‚Schwebendâ”‚ â”‚Schnell â”‚ â”‚Zick-Zackâ”‚      â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â”‚Statischâ”‚ â”‚Anders  â”‚                   â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                           â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ Gab es GerÃ¤usche?                         â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â”‚Summend â”‚ â”‚Lautlos â”‚ â”‚Pfeifend â”‚       â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                           â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ âšªâšªâšªâšªâš«  5/5 Fragen                      â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                           â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ [Ãœberspringen]  [Weiter â†’]                â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  â† Interaktiv! Kann Fragen beantworten         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  Tester-Tools:                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â±ï¸  Durchschnittliche Zeit: 23 Sekunden          â”‚   â”‚
â”‚  â”‚ âœ“  Alle Conditional-Logic-Checks passed         â”‚   â”‚
â”‚  â”‚ âš ï¸  Frage 3 wurde Ã¼bersprungen (Test-User)      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  [â—€ Vorherige Frage]  [NÃ¤chste Frage â–¶]                â”‚
â”‚  [Von vorne starten]  [Als Test-User durchgehen]        â”‚
â”‚                                                         â”‚
â”‚  ğŸ’¡ Ã„nderungen sind NICHT live - nur Preview!           â”‚
â”‚  [Live schalten] [Verwerfen]                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- Fullscreen-Modus
- Mobile/Desktop Toggle
- Interaktiv (kann tatsÃ¤chlich antworten)
- Timer (Durchschnittszeit messen)
- Test-User-Simulation
- Navigation zwischen Fragen
- "Live schalten" Button (wenn zufrieden)

---

### Screen 5: Analytics-Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š Analytics: UFO Fragen-Katalog                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Zeitraum: [Letzte 7 Tage â–¼]  [Vergleich: Vorwoche]   â”‚
â”‚                                                         â”‚
â”‚  KPIs:                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ 1,234       â”‚ â”‚ 87%         â”‚ â”‚ 12s         â”‚      â”‚
â”‚  â”‚ Antworten   â”‚ â”‚ Antwort-Rateâ”‚ â”‚ Ã˜ Zeit      â”‚      â”‚
â”‚  â”‚ â†— +23%      â”‚ â”‚ â†˜ -3%       â”‚ â”‚ â†˜ -1s       â”‚      â”‚  â† Trend
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                         â”‚
â”‚  Fragen-Performance (5 Fragen):                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ 1. Bewegung     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 89%  8s  âœ…       â”‚   â”‚
â”‚  â”‚ 2. GerÃ¤usche    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 92%  6s  âœ…     â”‚   â”‚
â”‚  â”‚ 3. Alleine?     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 78%  5s  âš ï¸          â”‚   â”‚  â† Niedrig!
â”‚  â”‚ 4. Dauer        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 85%  7s  âœ…       â”‚   â”‚
â”‚  â”‚ 5. Form         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 65%  9s  âŒ            â”‚   â”‚  â† Sehr niedrig
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ = Antwort-Rate                    â”‚   â”‚
â”‚  â”‚ 8s = Durchschnittliche Zeit                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  Detaillierte Analyse (Frage "Bewegung"):              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Top-Antworten:                                  â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚ â”‚ Schnell:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 45% (560x) â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ Schwebend:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 28% (350x)       â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ Zick-Zack:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 18% (224x)           â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ Statisch:    â–ˆâ–ˆ 9% (112x)                â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ Anders:      â–Œ 3% (37x)                  â”‚   â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ Zeitverlauf (7 Tage):                           â”‚   â”‚
â”‚  â”‚ [Line-Chart: Antwort-Rate Ã¼ber Zeit]            â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ [Click fÃ¼r Details â†’]                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  ğŸ’¡ AI-Insights:                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ Frage 3 (Alleine?) wird oft Ã¼bersprungen     â”‚   â”‚
â”‚  â”‚   â†’ Empfehlung: Umformulieren oder optional     â”‚   â”‚
â”‚  â”‚     machen                                      â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ â€¢ Frage 5 (Form) hat lange Antwortzeit (9s)    â”‚   â”‚
â”‚  â”‚   â†’ Zu viele Optionen? Eventuell reduzieren    â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ â€¢ "Schnell" ist hÃ¤ufigste Antwort (45%)        â”‚   â”‚
â”‚  â”‚   â†’ Vielleicht Sub-Frage: "Wie schnell?"       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  [ğŸ“¥ Export CSV]  [ğŸ“Š Detaillierter Report (PDF)]      â”‚
â”‚  [ğŸ“§ WÃ¶chentlich per Email]                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- KPIs mit Trend (â†—â†˜)
- Fragen-Performance-Ãœbersicht
- Detaillierte Analyse pro Frage
- Top-Antworten (Bar-Chart)
- Zeitverlauf (Line-Chart)
- AI-Insights & Empfehlungen
- Export-Funktionen

---

### Screen 6: Templates & Bulk-Operations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ Fragen-Templates                        [+ Neu]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Vorgefertigte Fragen-Sets:                             â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ¯ Standard: Ort & Zeit                         â”‚   â”‚
â”‚  â”‚ 3 Fragen                                        â”‚   â”‚
â”‚  â”‚ Erstellt: System                                â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ EnthÃ¤lt:                                        â”‚   â”‚
â”‚  â”‚ â€¢ Wo ist das passiert?                          â”‚   â”‚
â”‚  â”‚ â€¢ Wann ist das passiert?                        â”‚   â”‚
â”‚  â”‚ â€¢ Wie lange dauerte es?                         â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ [ğŸ‘ï¸ Vorschau] [+ Zu Kategorie hinzufÃ¼gen]       â”‚   â”‚
â”‚  â”‚ [âœ Bearbeiten] [ğŸ“‹ Duplizieren]                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ‘¥ Standard: Zeugen                             â”‚   â”‚
â”‚  â”‚ 2 Fragen                                        â”‚   â”‚
â”‚  â”‚ Erstellt: System                                â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ EnthÃ¤lt:                                        â”‚   â”‚
â”‚  â”‚ â€¢ Warst du alleine?                             â”‚   â”‚
â”‚  â”‚ â€¢ Wer war dabei? (Follow-Up)                    â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ [ğŸ‘ï¸] [+] [âœ] [ğŸ“‹]                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ¨ Custom: UFO Basis-Set                        â”‚   â”‚
â”‚  â”‚ 5 Fragen                                        â”‚   â”‚
â”‚  â”‚ Erstellt: @admin1 am 15.01.2025                 â”‚   â”‚
â”‚  â”‚ Verwendet: 3x (UFO, Paranormal, NDE)            â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ [ğŸ‘ï¸] [+] [âœ] [ğŸ“‹] [ğŸ—‘ï¸]                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  [+ Eigenes Template erstellen]                         â”‚
â”‚  [ğŸ“¥ Template importieren (JSON)]                       â”‚
â”‚                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                         â”‚
â”‚  Bulk-Operations:                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Kategorien auswÃ¤hlen:                           â”‚   â”‚
â”‚  â”‚ â˜‘ Alle Kategorien (8)                           â”‚   â”‚
â”‚  â”‚ â˜‘ UFO                                           â”‚   â”‚
â”‚  â”‚ â˜‘ Paranormal                                    â”‚   â”‚
â”‚  â”‚ â˜ TrÃ¤ume                                        â”‚   â”‚
â”‚  â”‚ â˜ Psychedelisch                                â”‚   â”‚
â”‚  â”‚ ... (mehr)                                      â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ Aktionen fÃ¼r gewÃ¤hlte Kategorien:               â”‚   â”‚
â”‚  â”‚ [Alle Fragen aktivieren]                        â”‚   â”‚
â”‚  â”‚ [Alle Fragen deaktivieren]                      â”‚   â”‚
â”‚  â”‚ [PrioritÃ¤ten neu nummerieren (1,2,3...)]        â”‚   â”‚
â”‚  â”‚ [Als Template exportieren]                      â”‚   â”‚
â”‚  â”‚ [JSON exportieren]                              â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ Fragen-Operationen:                             â”‚   â”‚
â”‚  â”‚ [Duplikate finden & bereinigen]                 â”‚   â”‚
â”‚  â”‚ [Ungenutzte Fragen finden]                      â”‚   â”‚
â”‚  â”‚ [Analytics fÃ¼r alle Kategorien]                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- Vorgefertigte Templates
- Custom-Templates erstellen
- Template zu Kategorie hinzufÃ¼gen
- Import/Export (JSON)
- Bulk-Operations (Multi-Kategorie)
- Duplikate-Finder
- Analytics-Batch

---

### Screen 7: Change-History / Versionierung

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“œ Change-History                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Filter: [Alle Kategorien â–¼] [Alle Aktionen â–¼]         â”‚
â”‚         [Alle User â–¼] [Letzte 30 Tage â–¼]               â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 20.01.2025, 14:23                               â”‚   â”‚
â”‚  â”‚ @admin2 hat Frage "Farbe" zu UFO hinzugefÃ¼gt    â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ â–¼ Details                                       â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚ â”‚ Neue Frage:                              â”‚    â”‚   â”‚
â”‚  â”‚ â”‚ â€¢ Text: "Welche Farbe hatte es?"         â”‚    â”‚   â”‚
â”‚  â”‚ â”‚ â€¢ Typ: Chips (Multi)                     â”‚    â”‚   â”‚
â”‚  â”‚ â”‚ â€¢ Optionen: WeiÃŸ, Rot, GrÃ¼n, Blau...     â”‚    â”‚   â”‚
â”‚  â”‚ â”‚ â€¢ PrioritÃ¤t: 6                           â”‚    â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ [ğŸ” Vergleich] [â†©ï¸ RÃ¼ckgÃ¤ngig] [ğŸ“‹ Kopieren]    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 20.01.2025, 10:15                               â”‚   â”‚
â”‚  â”‚ @admin1 hat Frage "Bewegung" bearbeitet         â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ â–¼ Details                                       â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚ â”‚ GeÃ¤ndert:                                â”‚    â”‚   â”‚
â”‚  â”‚ â”‚ â€¢ Hilfetext:                             â”‚    â”‚   â”‚
â”‚  â”‚ â”‚   Alt: "Beschreibe die Bewegung"         â”‚    â”‚   â”‚
â”‚  â”‚ â”‚   Neu: "Auch ungewÃ¶hnliche Bewegungen..."â”‚    â”‚   â”‚
â”‚  â”‚ â”‚                                          â”‚    â”‚   â”‚
â”‚  â”‚ â”‚ â€¢ Option "Teleportiert" hinzugefÃ¼gt      â”‚    â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ [ğŸ” Diff] [â†©ï¸ RÃ¼ckgÃ¤ngig]                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 19.01.2025, 16:42                               â”‚   â”‚
â”‚  â”‚ @admin2 hat Fragen neu sortiert (UFO)           â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ â–¼ Details                                       â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚ â”‚ Neue Reihenfolge:                        â”‚    â”‚   â”‚
â”‚  â”‚ â”‚ 1. Bewegung (vorher: 1)                  â”‚    â”‚   â”‚
â”‚  â”‚ â”‚ 2. GerÃ¤usche (vorher: 2)                 â”‚    â”‚   â”‚
â”‚  â”‚ â”‚ 3. Dauer (vorher: 4) â† geÃ¤ndert          â”‚    â”‚   â”‚
â”‚  â”‚ â”‚ 4. Alleine? (vorher: 3) â† geÃ¤ndert       â”‚    â”‚   â”‚
â”‚  â”‚ â”‚ 5. Form (vorher: 5)                      â”‚    â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ [ğŸ”] [â†©ï¸]                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 18.01.2025, 09:30                               â”‚   â”‚
â”‚  â”‚ System: Analytics aktualisiert                  â”‚   â”‚
â”‚  â”‚ Automatisch, tÃ¤glich                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  [Mehr laden...]                                        â”‚
â”‚  [ğŸ“¥ Export History (CSV)]                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- Chronologische Liste
- Filter (Kategorie, Aktion, User, Datum)
- Expandable Details
- Diff-View (Alt vs. Neu)
- RÃ¼ckgÃ¤ngig-machen (mit BestÃ¤tigung)
- Export-Funktion

---

### Screen 8: User-Permissions (Super-Admin only)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¥ User-Permissions                        [+ HinzufÃ¼genâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Admin-Users (12):                                      â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ @admin1                                  [â‹®]    â”‚   â”‚
â”‚  â”‚ admin1@xp-share.com                             â”‚   â”‚
â”‚  â”‚ Rolle: Super-Admin                              â”‚   â”‚
â”‚  â”‚ HinzugefÃ¼gt: 01.01.2025 von System              â”‚   â”‚
â”‚  â”‚ Letzte AktivitÃ¤t: vor 2 Stunden                 â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ [Rolle Ã¤ndern] [Entfernen] [Activity-Log]       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ @content_manager_1                       [â‹®]    â”‚   â”‚
â”‚  â”‚ sarah@xp-share.com                              â”‚   â”‚
â”‚  â”‚ Rolle: Content-Manager                          â”‚   â”‚
â”‚  â”‚ HinzugefÃ¼gt: 10.01.2025 von @admin1             â”‚   â”‚
â”‚  â”‚ Letzte AktivitÃ¤t: vor 1 Tag                     â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ Permissions:                                    â”‚   â”‚
â”‚  â”‚ âœ… Fragen erstellen/bearbeiten                  â”‚   â”‚
â”‚  â”‚ âœ… Templates erstellen                          â”‚   â”‚
â”‚  â”‚ âœ… Analytics ansehen                            â”‚   â”‚
â”‚  â”‚ âŒ Kategorien lÃ¶schen                           â”‚   â”‚
â”‚  â”‚ âŒ User-Permissions verwalten                   â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ [Rolle Ã¤ndern] [Entfernen]                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ @analyst_1                               [â‹®]    â”‚   â”‚
â”‚  â”‚ john@xp-share.com                               â”‚   â”‚
â”‚  â”‚ Rolle: Analyst                                  â”‚   â”‚
â”‚  â”‚ HinzugefÃ¼gt: 15.01.2025 von @admin1             â”‚   â”‚
â”‚  â”‚ Letzte AktivitÃ¤t: vor 3 Tagen                   â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ Permissions:                                    â”‚   â”‚
â”‚  â”‚ âœ… Kategorien ansehen                           â”‚   â”‚
â”‚  â”‚ âœ… Fragen ansehen                               â”‚   â”‚
â”‚  â”‚ âœ… Analytics ansehen & exportieren              â”‚   â”‚
â”‚  â”‚ âŒ Editieren                                    â”‚   â”‚
â”‚  â”‚ âŒ LÃ¶schen                                      â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚ [Rolle Ã¤ndern] [Entfernen]                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  Rollen-Ãœbersicht:                                      â”‚
â”‚  â€¢ Super-Admin (3): Voller Zugriff                     â”‚
â”‚  â€¢ Content-Manager (7): Content-Verwaltung              â”‚
â”‚  â€¢ Analyst (2): Nur Lesen + Analytics                  â”‚
â”‚                                                         â”‚
â”‚  [+ Admin-User hinzufÃ¼gen]                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- User-Liste mit Rollen
- Permissions-Ãœbersicht
- Rolle Ã¤ndern (Dropdown)
- User entfernen (mit BestÃ¤tigung)
- Activity-Log pro User
- Neue User hinzufÃ¼gen

---

## ğŸ—„ï¸ Database-Schema (VollstÃ¤ndig)

```sql
-- ============================================
-- KATEGORIEN
-- ============================================

CREATE TABLE question_categories (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),

  -- Basis-Info
  slug text UNIQUE NOT NULL,
  name text NOT NULL,
  description text,
  icon text, -- Emoji oder Icon-Identifier

  -- Sortierung
  sort_order int NOT NULL DEFAULT 0,

  -- Status
  is_active boolean DEFAULT true,

  -- Timestamps
  created_at timestamptz DEFAULT now(),
  updated_at timestamptz DEFAULT now(),
  created_by uuid REFERENCES auth.users,
  updated_by uuid REFERENCES auth.users
);

CREATE INDEX categories_slug_idx ON question_categories(slug);
CREATE INDEX categories_active_idx ON question_categories(is_active) WHERE is_active = true;
CREATE INDEX categories_sort_idx ON question_categories(sort_order);

-- ============================================
-- FRAGEN
-- ============================================

CREATE TABLE dynamic_questions (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  category_id uuid REFERENCES question_categories ON DELETE CASCADE,

  -- Frage-Inhalt
  question_text text NOT NULL,
  question_type text NOT NULL
    CHECK (question_type IN ('chips', 'chips-multi', 'text', 'boolean', 'slider', 'date', 'time')),

  -- Optionen (fÃ¼r Chips-Typen)
  options jsonb DEFAULT '[]'::jsonb,
  -- ['Option1', 'Option2', ...]

  -- Metadaten
  priority int NOT NULL,
  is_optional boolean DEFAULT true,
  help_text text,
  placeholder text,

  -- Conditional Logic
  conditional_logic jsonb DEFAULT '{}'::jsonb,
  -- {
  --   "showIf": {
  --     "type": "field_empty",
  --     "field": "time_extracted"
  --   }
  -- }

  -- Follow-Up Frage
  follow_up_question jsonb,
  -- {
  --   "condition": {
  --     "answer": "Anders"
  --   },
  --   "question": "Beschreibe genauer:",
  --   "type": "text",
  --   "placeholder": "z.B. ..."
  -- }

  -- Tags (fÃ¼r Suche/Filterung)
  tags text[] DEFAULT '{}',

  -- Status
  is_active boolean DEFAULT true,

  -- Timestamps
  created_at timestamptz DEFAULT now(),
  updated_at timestamptz DEFAULT now(),
  created_by uuid REFERENCES auth.users,
  updated_by uuid REFERENCES auth.users,

  -- Constraints
  UNIQUE(category_id, priority)
);

CREATE INDEX questions_category_idx ON dynamic_questions(category_id);
CREATE INDEX questions_priority_idx ON dynamic_questions(category_id, priority);
CREATE INDEX questions_active_idx ON dynamic_questions(is_active) WHERE is_active = true;
CREATE INDEX questions_type_idx ON dynamic_questions(question_type);

-- ============================================
-- CHANGE-HISTORY (Versionierung)
-- ============================================

CREATE TABLE question_change_history (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),

  -- Was wurde geÃ¤ndert
  entity_type text NOT NULL CHECK (entity_type IN ('category', 'question')),
  entity_id uuid NOT NULL,

  -- Wer & Wann
  changed_by uuid REFERENCES auth.users,
  changed_at timestamptz DEFAULT now(),

  -- Art der Ã„nderung
  change_type text NOT NULL
    CHECK (change_type IN ('created', 'updated', 'deleted', 'reordered', 'activated', 'deactivated')),

  -- Daten (JSON)
  old_value jsonb,
  new_value jsonb,

  -- Optional: Beschreibung
  description text
);

CREATE INDEX history_entity_idx ON question_change_history(entity_type, entity_id);
CREATE INDEX history_changed_by_idx ON question_change_history(changed_by);
CREATE INDEX history_changed_at_idx ON question_change_history(changed_at DESC);

-- ============================================
-- AI-ADAPTIVE QUESTIONS (NEU!)
-- ============================================

-- Erweitere dynamic_questions fÃ¼r AI-Adaptive Follow-Ups
ALTER TABLE dynamic_questions ADD COLUMN IF NOT EXISTS
  ai_adaptive boolean DEFAULT false;

ALTER TABLE dynamic_questions ADD COLUMN IF NOT EXISTS
  adaptive_conditions jsonb DEFAULT '[]'::jsonb;
  -- [
  --   {
  --     "trigger_answer": "Lautlos",
  --     "follow_up_prompt": "Frage ob Vibrationen wahrgenommen wurden",
  --     "follow_up_type": "yes_no"
  --   }
  -- ]

-- Speichere AI-generierte Follow-Up-Fragen
CREATE TABLE ai_generated_questions (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),

  -- Kontext
  parent_question_id uuid REFERENCES dynamic_questions,
  experience_id uuid REFERENCES experiences,
  user_answer text NOT NULL,

  -- AI-Generierte Frage
  generated_question text NOT NULL,
  question_type text NOT NULL, -- 'yes_no', 'text', 'chips'
  options jsonb, -- Falls Chips

  -- User-Antwort auf Follow-Up
  user_response jsonb,

  -- Metadaten
  generated_at timestamptz DEFAULT now(),
  answered_at timestamptz
);

CREATE INDEX ai_gen_q_parent_idx ON ai_generated_questions(parent_question_id);
CREATE INDEX ai_gen_q_exp_idx ON ai_generated_questions(experience_id);

-- ============================================
-- ANALYTICS
-- ============================================

CREATE TABLE question_analytics (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),

  question_id uuid REFERENCES dynamic_questions ON DELETE CASCADE,
  category_id uuid REFERENCES question_categories ON DELETE CASCADE,

  -- Datum
  date date NOT NULL,

  -- Metriken
  shown_count int DEFAULT 0,
  answered_count int DEFAULT 0,
  skipped_count int DEFAULT 0,
  avg_time_seconds float,

  -- Antwort-Verteilung (fÃ¼r Chips)
  answer_distribution jsonb DEFAULT '{}'::jsonb,
  -- {
  --   "Schwebend": 120,
  --   "Schnell": 89,
  --   "Zick-Zack": 45,
  --   ...
  -- }

  -- Constraints
  UNIQUE(question_id, date)
);

CREATE INDEX analytics_question_idx ON question_analytics(question_id);
CREATE INDEX analytics_category_idx ON question_analytics(category_id);
CREATE INDEX analytics_date_idx ON question_analytics(date DESC);

-- Aggregierte Analytics (fÃ¼r schnellere Queries)
CREATE MATERIALIZED VIEW question_analytics_summary AS
SELECT
  q.id as question_id,
  q.category_id,
  q.question_text,
  SUM(a.shown_count) as total_shown,
  SUM(a.answered_count) as total_answered,
  SUM(a.skipped_count) as total_skipped,
  AVG(a.avg_time_seconds) as avg_time,
  CASE
    WHEN SUM(a.shown_count) > 0
    THEN ROUND((SUM(a.answered_count)::float / SUM(a.shown_count) * 100)::numeric, 1)
    ELSE 0
  END as answer_rate_percent,
  MAX(a.date) as last_updated
FROM dynamic_questions q
LEFT JOIN question_analytics a ON a.question_id = q.id
WHERE q.is_active = true
  AND a.date >= CURRENT_DATE - INTERVAL '30 days'
GROUP BY q.id, q.category_id, q.question_text;

CREATE UNIQUE INDEX ON question_analytics_summary(question_id);

-- Refresh tÃ¤glich via cron
CREATE OR REPLACE FUNCTION refresh_analytics_summary()
RETURNS void AS $$
BEGIN
  REFRESH MATERIALIZED VIEW CONCURRENTLY question_analytics_summary;
END;
$$ LANGUAGE plpgsql;

-- ============================================
-- TEMPLATES
-- ============================================

CREATE TABLE question_templates (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),

  -- Template-Info
  name text NOT NULL,
  description text,

  -- Fragen (Array von Fragen-Configs)
  questions jsonb NOT NULL,
  -- [
  --   {
  --     "question_text": "Wo ist das passiert?",
  --     "question_type": "text",
  --     "priority": 1,
  --     ...
  --   },
  --   ...
  -- ]

  -- Sichtbarkeit
  is_public boolean DEFAULT false,

  -- Verwendung
  usage_count int DEFAULT 0,

  -- Timestamps
  created_at timestamptz DEFAULT now(),
  updated_at timestamptz DEFAULT now(),
  created_by uuid REFERENCES auth.users
);

CREATE INDEX templates_public_idx ON question_templates(is_public) WHERE is_public = true;
CREATE INDEX templates_created_by_idx ON question_templates(created_by);

-- ============================================
-- ADMIN-PERMISSIONS
-- ============================================

CREATE TYPE admin_role AS ENUM ('super_admin', 'content_manager', 'analyst');

CREATE TABLE admin_users (
  user_id uuid PRIMARY KEY REFERENCES auth.users ON DELETE CASCADE,

  -- Rolle
  role admin_role NOT NULL,

  -- Granted by
  granted_by uuid REFERENCES auth.users,
  granted_at timestamptz DEFAULT now(),

  -- Letzte AktivitÃ¤t
  last_activity timestamptz DEFAULT now()
);

CREATE INDEX admin_users_role_idx ON admin_users(role);

-- ============================================
-- PERMISSIONS-ÃœBERSICHT
-- ============================================

/*
ROLLEN & PERMISSIONS:

1. SUPER-ADMIN:
   âœ… Alle Permissions
   âœ… User-Management
   âœ… Kategorien erstellen/lÃ¶schen
   âœ… Fragen erstellen/bearbeiten/lÃ¶schen
   âœ… Templates erstellen
   âœ… Analytics ansehen
   âœ… Ãœbersetzungen reviewen (siehe MULTILINGUAL-STRATEGY.md)

2. CONTENT-MANAGER:
   âœ… Kategorien bearbeiten (NICHT lÃ¶schen)
   âœ… Fragen erstellen/bearbeiten/lÃ¶schen
   âœ… Templates erstellen
   âœ… Analytics ansehen
   âœ… Ãœbersetzungen manuell korrigieren (quality_score < 0.7)
   âŒ User-Management
   âŒ Kategorien lÃ¶schen

3. ANALYST:
   âœ… Kategorien ansehen
   âœ… Fragen ansehen
   âœ… Analytics ansehen & exportieren
   âŒ Editieren/LÃ¶schen
   âŒ User-Management
*/

-- ============================================
-- ROW-LEVEL-SECURITY (RLS)
-- ============================================

-- Kategorien
ALTER TABLE question_categories ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Admins can read categories"
ON question_categories FOR SELECT
USING (
  EXISTS (
    SELECT 1 FROM admin_users
    WHERE user_id = auth.uid()
  )
);

CREATE POLICY "Content managers can edit categories"
ON question_categories FOR UPDATE
USING (
  EXISTS (
    SELECT 1 FROM admin_users
    WHERE user_id = auth.uid()
      AND role IN ('super_admin', 'content_manager')
  )
);

CREATE POLICY "Super admins can create categories"
ON question_categories FOR INSERT
WITH CHECK (
  EXISTS (
    SELECT 1 FROM admin_users
    WHERE user_id = auth.uid()
      AND role = 'super_admin'
  )
);

CREATE POLICY "Super admins can delete categories"
ON question_categories FOR DELETE
USING (
  EXISTS (
    SELECT 1 FROM admin_users
    WHERE user_id = auth.uid()
      AND role = 'super_admin'
  )
);

-- Fragen (gleiche Policies wie Kategorien)
ALTER TABLE dynamic_questions ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Admins can read questions"
ON dynamic_questions FOR SELECT
USING (
  EXISTS (SELECT 1 FROM admin_users WHERE user_id = auth.uid())
);

CREATE POLICY "Content managers can manage questions"
ON dynamic_questions FOR ALL
USING (
  EXISTS (
    SELECT 1 FROM admin_users
    WHERE user_id = auth.uid()
      AND role IN ('super_admin', 'content_manager')
  )
);

-- Analytics (alle Admins kÃ¶nnen lesen)
ALTER TABLE question_analytics ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Admins can read analytics"
ON question_analytics FOR SELECT
USING (
  EXISTS (SELECT 1 FROM admin_users WHERE user_id = auth.uid())
);

-- History (alle Admins kÃ¶nnen lesen)
ALTER TABLE question_change_history ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Admins can read history"
ON question_change_history FOR SELECT
USING (
  EXISTS (SELECT 1 FROM admin_users WHERE user_id = auth.uid())
);

-- Templates
ALTER TABLE question_templates ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Admins can read templates"
ON question_templates FOR SELECT
USING (
  is_public = true OR
  EXISTS (SELECT 1 FROM admin_users WHERE user_id = auth.uid())
);

CREATE POLICY "Content managers can create templates"
ON question_templates FOR INSERT
WITH CHECK (
  EXISTS (
    SELECT 1 FROM admin_users
    WHERE user_id = auth.uid()
      AND role IN ('super_admin', 'content_manager')
  )
);

-- ============================================
-- FUNCTIONS & TRIGGERS
-- ============================================

-- Auto-Update updated_at
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
  NEW.updated_at = now();
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER update_categories_updated_at
  BEFORE UPDATE ON question_categories
  FOR EACH ROW
  EXECUTE FUNCTION update_updated_at_column();

CREATE TRIGGER update_questions_updated_at
  BEFORE UPDATE ON dynamic_questions
  FOR EACH ROW
  EXECUTE FUNCTION update_updated_at_column();

-- Log Changes automatisch
CREATE OR REPLACE FUNCTION log_question_changes()
RETURNS TRIGGER AS $$
BEGIN
  IF (TG_OP = 'INSERT') THEN
    INSERT INTO question_change_history (
      entity_type,
      entity_id,
      changed_by,
      change_type,
      new_value
    ) VALUES (
      'question',
      NEW.id,
      NEW.created_by,
      'created',
      to_jsonb(NEW)
    );
    RETURN NEW;

  ELSIF (TG_OP = 'UPDATE') THEN
    INSERT INTO question_change_history (
      entity_type,
      entity_id,
      changed_by,
      change_type,
      old_value,
      new_value
    ) VALUES (
      'question',
      NEW.id,
      NEW.updated_by,
      'updated',
      to_jsonb(OLD),
      to_jsonb(NEW)
    );
    RETURN NEW;

  ELSIF (TG_OP = 'DELETE') THEN
    INSERT INTO question_change_history (
      entity_type,
      entity_id,
      changed_by,
      change_type,
      old_value
    ) VALUES (
      'question',
      OLD.id,
      auth.uid(),
      'deleted',
      to_jsonb(OLD)
    );
    RETURN OLD;
  END IF;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER log_question_changes_trigger
  AFTER INSERT OR UPDATE OR DELETE ON dynamic_questions
  FOR EACH ROW
  EXECUTE FUNCTION log_question_changes();

-- Update Admin Last Activity
CREATE OR REPLACE FUNCTION update_admin_activity()
RETURNS TRIGGER AS $$
BEGIN
  UPDATE admin_users
  SET last_activity = now()
  WHERE user_id = auth.uid();

  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER update_admin_activity_on_category_change
  AFTER INSERT OR UPDATE OR DELETE ON question_categories
  FOR EACH ROW
  EXECUTE FUNCTION update_admin_activity();

CREATE TRIGGER update_admin_activity_on_question_change
  AFTER INSERT OR UPDATE OR DELETE ON dynamic_questions
  FOR EACH ROW
  EXECUTE FUNCTION update_admin_activity();
```

---

## ğŸ”§ API-Endpoints (VollstÃ¤ndig)

### **Middleware: Permission-Check**

```typescript
// middleware/adminAuth.ts

export async function requireAdmin(
  req: Request,
  minRole: 'analyst' | 'content_manager' | 'super_admin' = 'analyst'
) {
  const user = await getUser(req)

  if (!user) {
    throw new Error('Unauthorized')
  }

  const { data: adminUser } = await supabase
    .from('admin_users')
    .select('role')
    .eq('user_id', user.id)
    .single()

  if (!adminUser) {
    throw new Error('Not an admin')
  }

  // Role-Hierarchy check
  const roleHierarchy = {
    'analyst': 1,
    'content_manager': 2,
    'super_admin': 3
  }

  if (roleHierarchy[adminUser.role] < roleHierarchy[minRole]) {
    throw new Error('Insufficient permissions')
  }

  return { user, role: adminUser.role }
}
```

---

### **Kategorien-Endpoints**

```typescript
// GET /api/admin/categories
// Alle Kategorien holen
export async function GET(req: Request) {
  await requireAdmin(req, 'analyst')

  const { data } = await supabase
    .from('question_categories')
    .select(`
      *,
      questions:dynamic_questions(count),
      _analytics:question_analytics_summary(
        avg_time,
        answer_rate_percent
      )
    `)
    .order('sort_order')

  return Response.json(data)
}

// POST /api/admin/categories
// Neue Kategorie erstellen
export async function POST(req: Request) {
  const { user } = await requireAdmin(req, 'super_admin')

  const { slug, name, description, icon } = await req.json()

  // Get next sort_order
  const { data: lastCategory } = await supabase
    .from('question_categories')
    .select('sort_order')
    .order('sort_order', { ascending: false })
    .limit(1)
    .single()

  const nextOrder = (lastCategory?.sort_order || 0) + 1

  const { data, error } = await supabase
    .from('question_categories')
    .insert({
      slug,
      name,
      description,
      icon,
      sort_order: nextOrder,
      created_by: user.id
    })
    .select()
    .single()

  if (error) {
    return Response.json({ error: error.message }, { status: 400 })
  }

  return Response.json(data)
}

// PATCH /api/admin/categories/:id
// Kategorie editieren
export async function PATCH(
  req: Request,
  { params }: { params: { id: string } }
) {
  const { user } = await requireAdmin(req, 'content_manager')

  const updates = await req.json()

  const { data, error } = await supabase
    .from('question_categories')
    .update({
      ...updates,
      updated_by: user.id
    })
    .eq('id', params.id)
    .select()
    .single()

  if (error) {
    return Response.json({ error: error.message }, { status: 400 })
  }

  return Response.json(data)
}

// DELETE /api/admin/categories/:id
// Kategorie lÃ¶schen (nur Super-Admin)
export async function DELETE(
  req: Request,
  { params }: { params: { id: string } }
) {
  await requireAdmin(req, 'super_admin')

  // Check if has questions
  const { count } = await supabase
    .from('dynamic_questions')
    .select('id', { count: 'exact', head: true })
    .eq('category_id', params.id)
    .eq('is_active', true)

  if (count && count > 0) {
    return Response.json(
      { error: `Cannot delete category with ${count} active questions` },
      { status: 400 }
    )
  }

  const { error } = await supabase
    .from('question_categories')
    .delete()
    .eq('id', params.id)

  if (error) {
    return Response.json({ error: error.message }, { status: 400 })
  }

  return Response.json({ success: true })
}

// POST /api/admin/categories/reorder
// Kategorien neu sortieren
export async function POST(req: Request) {
  await requireAdmin(req, 'content_manager')

  const { categoryIds } = await req.json()
  // categoryIds = ['uuid1', 'uuid2', 'uuid3'] in neuer Reihenfolge

  // Update sort_order
  for (let i = 0; i < categoryIds.length; i++) {
    await supabase
      .from('question_categories')
      .update({ sort_order: i })
      .eq('id', categoryIds[i])
  }

  return Response.json({ success: true })
}
```

---

### **Fragen-Endpoints**

```typescript
// GET /api/admin/categories/:categoryId/questions
// Fragen einer Kategorie
export async function GET(
  req: Request,
  { params }: { params: { categoryId: string } }
) {
  await requireAdmin(req, 'analyst')

  const { data } = await supabase
    .from('dynamic_questions')
    .select(`
      *,
      _analytics:question_analytics_summary(
        total_shown,
        total_answered,
        answer_rate_percent,
        avg_time
      )
    `)
    .eq('category_id', params.categoryId)
    .eq('is_active', true)
    .order('priority')

  return Response.json(data)
}

// POST /api/admin/questions
// Neue Frage erstellen
export async function POST(req: Request) {
  const { user } = await requireAdmin(req, 'content_manager')

  const questionData = await req.json()

  // Validate
  if (!questionData.question_text || !questionData.question_type) {
    return Response.json(
      { error: 'Missing required fields' },
      { status: 400 }
    )
  }

  // Get next priority
  const { data: lastQuestion } = await supabase
    .from('dynamic_questions')
    .select('priority')
    .eq('category_id', questionData.category_id)
    .order('priority', { ascending: false })
    .limit(1)
    .single()

  const nextPriority = (lastQuestion?.priority || 0) + 1

  const { data, error } = await supabase
    .from('dynamic_questions')
    .insert({
      ...questionData,
      priority: questionData.priority || nextPriority,
      created_by: user.id,
      updated_by: user.id
    })
    .select()
    .single()

  if (error) {
    return Response.json({ error: error.message }, { status: 400 })
  }

  // Log change (via trigger, aber hier zusÃ¤tzlich mit description)
  await supabase.from('question_change_history').insert({
    entity_type: 'question',
    entity_id: data.id,
    changed_by: user.id,
    change_type: 'created',
    new_value: data,
    description: `Created question: ${data.question_text}`
  })

  return Response.json(data)
}

// PATCH /api/admin/questions/:id
// Frage editieren
export async function PATCH(
  req: Request,
  { params }: { params: { id: string } }
) {
  const { user } = await requireAdmin(req, 'content_manager')

  const updates = await req.json()

  // Get old value for history
  const { data: oldQuestion } = await supabase
    .from('dynamic_questions')
    .select('*')
    .eq('id', params.id)
    .single()

  const { data, error } = await supabase
    .from('dynamic_questions')
    .update({
      ...updates,
      updated_by: user.id
    })
    .eq('id', params.id)
    .select()
    .single()

  if (error) {
    return Response.json({ error: error.message }, { status: 400 })
  }

  return Response.json(data)
}

// DELETE /api/admin/questions/:id
// Frage lÃ¶schen (soft delete)
export async function DELETE(
  req: Request,
  { params }: { params: { id: string } }
) {
  const { user } = await requireAdmin(req, 'content_manager')

  // Soft delete
  const { data, error } = await supabase
    .from('dynamic_questions')
    .update({
      is_active: false,
      updated_by: user.id
    })
    .eq('id', params.id)
    .select()
    .single()

  if (error) {
    return Response.json({ error: error.message }, { status: 400 })
  }

  return Response.json({ success: true })
}

// POST /api/admin/questions/reorder
// Fragen neu sortieren (Drag & Drop)
export async function POST(req: Request) {
  const { user } = await requireAdmin(req, 'content_manager')

  const { categoryId, questionIds } = await req.json()

  // Update priorities
  for (let i = 0; i < questionIds.length; i++) {
    await supabase
      .from('dynamic_questions')
      .update({
        priority: i + 1,
        updated_by: user.id
      })
      .eq('id', questionIds[i])
  }

  // Log reorder
  await supabase.from('question_change_history').insert({
    entity_type: 'question',
    entity_id: questionIds[0], // First question as reference
    changed_by: user.id,
    change_type: 'reordered',
    new_value: { categoryId, order: questionIds },
    description: `Reordered ${questionIds.length} questions in category ${categoryId}`
  })

  return Response.json({ success: true })
}

// POST /api/admin/questions/:id/duplicate
// Frage duplizieren
export async function POST(
  req: Request,
  { params }: { params: { id: string } }
) {
  const { user } = await requireAdmin(req, 'content_manager')

  const { data: original } = await supabase
    .from('dynamic_questions')
    .select('*')
    .eq('id', params.id)
    .single()

  if (!original) {
    return Response.json({ error: 'Question not found' }, { status: 404 })
  }

  // Get next priority
  const { data: lastQuestion } = await supabase
    .from('dynamic_questions')
    .select('priority')
    .eq('category_id', original.category_id)
    .order('priority', { ascending: false })
    .limit(1)
    .single()

  const { data, error } = await supabase
    .from('dynamic_questions')
    .insert({
      ...original,
      id: undefined, // Generate new ID
      question_text: `${original.question_text} (Kopie)`,
      priority: (lastQuestion?.priority || 0) + 1,
      created_by: user.id,
      updated_by: user.id,
      created_at: undefined,
      updated_at: undefined
    })
    .select()
    .single()

  if (error) {
    return Response.json({ error: error.message }, { status: 400 })
  }

  return Response.json(data)
}
```

---

### **Analytics-Endpoints**

```typescript
// GET /api/admin/analytics/categories/:categoryId
// Analytics fÃ¼r Kategorie
export async function GET(
  req: Request,
  { params }: { params: { categoryId: string } }
) {
  await requireAdmin(req, 'analyst')

  const { searchParams } = new URL(req.url)
  const startDate = searchParams.get('startDate') ||
    new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString()
  const endDate = searchParams.get('endDate') || new Date().toISOString()

  // Summary per question
  const { data: summary } = await supabase
    .from('question_analytics_summary')
    .select('*')
    .eq('category_id', params.categoryId)

  // Detailed data
  const { data: detailed } = await supabase
    .from('question_analytics')
    .select('*')
    .eq('category_id', params.categoryId)
    .gte('date', startDate)
    .lte('date', endDate)
    .order('date', { ascending: true })

  // Top answers aggregation (aus experience_answers)
  const { data: answerData } = await supabase
    .from('experience_answers')
    .select(`
      question_id,
      answer,
      experiences!inner(category_id, created_at)
    `)
    .eq('experiences.category_id', params.categoryId)
    .gte('experiences.created_at', startDate)
    .lte('experiences.created_at', endDate)

  // Aggregiere Antworten
  const topAnswers = {}
  answerData?.forEach(row => {
    if (!topAnswers[row.question_id]) {
      topAnswers[row.question_id] = {}
    }

    // Handle verschiedene Antwort-Typen
    const answerValue = row.answer.values || row.answer.value
    const answers = Array.isArray(answerValue) ? answerValue : [answerValue]

    answers.forEach(answer => {
      topAnswers[row.question_id][answer] =
        (topAnswers[row.question_id][answer] || 0) + 1
    })
  })

  return Response.json({
    summary,
    detailed,
    topAnswers,
    dateRange: { startDate, endDate }
  })
}

// GET /api/admin/analytics/insights
// AI-generierte Insights
export async function GET(req: Request) {
  await requireAdmin(req, 'analyst')

  const { searchParams } = new URL(req.url)
  const categoryId = searchParams.get('categoryId')

  // Fetch analytics
  const { data: summary } = await supabase
    .from('question_analytics_summary')
    .select('*')
    .eq('category_id', categoryId)

  // Generate insights
  const insights = []

  summary?.forEach(q => {
    // Low answer rate
    if (q.answer_rate_percent < 70) {
      insights.push({
        type: 'warning',
        severity: 'high',
        questionId: q.question_id,
        message: `Frage "${q.question_text}" hat niedrige Antwort-Rate (${q.answer_rate_percent}%)`,
        suggestion: 'Eventuell umformulieren oder optionale Frage machen'
      })
    }

    // High response time
    if (q.avg_time > 10) {
      insights.push({
        type: 'warning',
        severity: 'medium',
        questionId: q.question_id,
        message: `Frage "${q.question_text}" dauert lange (${q.avg_time}s)`,
        suggestion: 'Zu viele Optionen? Vereinfachen?'
      })
    }

    // High answer rate
    if (q.answer_rate_percent > 90) {
      insights.push({
        type: 'success',
        severity: 'low',
        questionId: q.question_id,
        message: `Frage "${q.question_text}" performt sehr gut (${q.answer_rate_percent}%)`,
        suggestion: 'Kann als Vorbild fÃ¼r andere Fragen dienen'
      })
    }
  })

  return Response.json({ insights })
}

// GET /api/admin/analytics/export
// Export Analytics als CSV
export async function GET(req: Request) {
  await requireAdmin(req, 'analyst')

  const { searchParams } = new URL(req.url)
  const categoryId = searchParams.get('categoryId')

  const { data } = await supabase
    .from('question_analytics')
    .select(`
      date,
      question:dynamic_questions(question_text),
      shown_count,
      answered_count,
      skipped_count,
      avg_time_seconds,
      answer_distribution
    `)
    .eq('category_id', categoryId)
    .order('date', { ascending: false })

  // Convert to CSV
  const csv = convertToCSV(data)

  return new Response(csv, {
    headers: {
      'Content-Type': 'text/csv',
      'Content-Disposition': `attachment; filename="analytics-${categoryId}.csv"`
    }
  })
}
```

---

### **Template-Endpoints**

```typescript
// GET /api/admin/templates
// Alle Templates
export async function GET(req: Request) {
  await requireAdmin(req, 'analyst')

  const { data } = await supabase
    .from('question_templates')
    .select('*')
    .or('is_public.eq.true,created_by.eq.' + req.user.id)
    .order('created_at', { ascending: false })

  return Response.json(data)
}

// POST /api/admin/templates
// Template erstellen
export async function POST(req: Request) {
  const { user } = await requireAdmin(req, 'content_manager')

  const { name, description, questions, is_public } = await req.json()

  const { data, error } = await supabase
    .from('question_templates')
    .insert({
      name,
      description,
      questions,
      is_public: is_public || false,
      created_by: user.id
    })
    .select()
    .single()

  if (error) {
    return Response.json({ error: error.message }, { status: 400 })
  }

  return Response.json(data)
}

// POST /api/admin/templates/:id/apply
// Template zu Kategorie hinzufÃ¼gen
export async function POST(
  req: Request,
  { params }: { params: { id: string } }
) {
  const { user } = await requireAdmin(req, 'content_manager')

  const { categoryId } = await req.json()

  const { data: template } = await supabase
    .from('question_templates')
    .select('questions')
    .eq('id', params.id)
    .single()

  if (!template) {
    return Response.json({ error: 'Template not found' }, { status: 404 })
  }

  // Get current max priority
  const { data: lastQuestion } = await supabase
    .from('dynamic_questions')
    .select('priority')
    .eq('category_id', categoryId)
    .order('priority', { ascending: false })
    .limit(1)
    .single()

  const startPriority = (lastQuestion?.priority || 0) + 1

  // Insert all questions from template
  const questionsToInsert = template.questions.map((q, index) => ({
    ...q,
    category_id: categoryId,
    priority: startPriority + index,
    created_by: user.id,
    updated_by: user.id
  }))

  const { data, error } = await supabase
    .from('dynamic_questions')
    .insert(questionsToInsert)
    .select()

  if (error) {
    return Response.json({ error: error.message }, { status: 400 })
  }

  // Increment usage count
  await supabase
    .from('question_templates')
    .update({ usage_count: supabase.rpc('increment', { x: 1 }) })
    .eq('id', params.id)

  return Response.json({ added: data.length, questions: data })
}
```

---

### **History-Endpoints**

```typescript
// GET /api/admin/history
// Change-History abrufen
export async function GET(req: Request) {
  await requireAdmin(req, 'analyst')

  const { searchParams } = new URL(req.url)
  const entityType = searchParams.get('entityType') // 'category' | 'question'
  const changeType = searchParams.get('changeType')
  const userId = searchParams.get('userId')
  const limit = parseInt(searchParams.get('limit') || '50')

  let query = supabase
    .from('question_change_history')
    .select(`
      *,
      user:changed_by(email, raw_user_meta_data)
    `)
    .order('changed_at', { ascending: false })
    .limit(limit)

  if (entityType) {
    query = query.eq('entity_type', entityType)
  }
  if (changeType) {
    query = query.eq('change_type', changeType)
  }
  if (userId) {
    query = query.eq('changed_by', userId)
  }

  const { data } = await query

  return Response.json(data)
}

// POST /api/admin/history/:id/revert
// Ã„nderung rÃ¼ckgÃ¤ngig machen
export async function POST(
  req: Request,
  { params }: { params: { id: string } }
) {
  const { user } = await requireAdmin(req, 'content_manager')

  const { data: historyEntry } = await supabase
    .from('question_change_history')
    .select('*')
    .eq('id', params.id)
    .single()

  if (!historyEntry) {
    return Response.json({ error: 'History entry not found' }, { status: 404 })
  }

  // Revert based on change type
  if (historyEntry.change_type === 'created') {
    // Delete the created item
    await supabase
      .from(historyEntry.entity_type === 'category' ? 'question_categories' : 'dynamic_questions')
      .delete()
      .eq('id', historyEntry.entity_id)

  } else if (historyEntry.change_type === 'updated') {
    // Restore old value
    await supabase
      .from(historyEntry.entity_type === 'category' ? 'question_categories' : 'dynamic_questions')
      .update({
        ...historyEntry.old_value,
        updated_by: user.id
      })
      .eq('id', historyEntry.entity_id)

  } else if (historyEntry.change_type === 'deleted') {
    // Re-create deleted item
    await supabase
      .from(historyEntry.entity_type === 'category' ? 'question_categories' : 'dynamic_questions')
      .insert({
        ...historyEntry.old_value,
        created_by: user.id,
        updated_by: user.id
      })
  }

  return Response.json({ success: true })
}
```

---

---

## âš›ï¸ React Components (VollstÃ¤ndig)

### **1. QuestionManager - Hauptkomponente**

```typescript
// components/admin/QuestionManager.tsx

'use client'

import { useState } from 'react'
import { DragDropContext, Droppable, Draggable, DropResult } from '@hello-pangea/dnd'
import { QuestionCard } from './QuestionCard'
import { QuestionEditor } from './QuestionEditor'
import { useMutation, useQuery, useQueryClient } from '@tanstack/react-query'
import { Button } from '@/components/ui/button'

interface QuestionManagerProps {
  categoryId: string
}

export function QuestionManager({ categoryId }: QuestionManagerProps) {
  const [editorOpen, setEditorOpen] = useState(false)
  const [editingQuestion, setEditingQuestion] = useState(null)
  const queryClient = useQueryClient()

  // Fetch questions
  const { data: questions, isLoading } = useQuery({
    queryKey: ['questions', categoryId],
    queryFn: () => fetch(`/api/admin/categories/${categoryId}/questions`).then(r => r.json())
  })

  // Reorder mutation
  const reorderMutation = useMutation({
    mutationFn: async (newOrder: string[]) => {
      return fetch('/api/admin/questions/reorder', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ categoryId, questionIds: newOrder })
      })
    },
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['questions', categoryId] })
    }
  })

  // Handle drag end
  const handleDragEnd = (result: DropResult) => {
    if (!result.destination) return

    const items = Array.from(questions)
    const [reorderedItem] = items.splice(result.source.index, 1)
    items.splice(result.destination.index, 0, reorderedItem)

    // Optimistic update
    queryClient.setQueryData(['questions', categoryId], items)

    // Send to server
    const newOrder = items.map(q => q.id)
    reorderMutation.mutate(newOrder)
  }

  // Delete question
  const deleteMutation = useMutation({
    mutationFn: async (questionId: string) => {
      return fetch(`/api/admin/questions/${questionId}`, {
        method: 'DELETE'
      })
    },
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['questions', categoryId] })
    }
  })

  // Duplicate question
  const duplicateMutation = useMutation({
    mutationFn: async (questionId: string) => {
      return fetch(`/api/admin/questions/${questionId}/duplicate`, {
        method: 'POST'
      }).then(r => r.json())
    },
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['questions', categoryId] })
    }
  })

  if (isLoading) {
    return <div>Loading...</div>
  }

  return (
    <div className="space-y-4">
      <div className="flex justify-between items-center">
        <h2 className="text-2xl font-bold">
          Fragen ({questions?.length || 0})
        </h2>
        <Button onClick={() => {
          setEditingQuestion(null)
          setEditorOpen(true)
        }}>
          + Neue Frage
        </Button>
      </div>

      <DragDropContext onDragEnd={handleDragEnd}>
        <Droppable droppableId="questions">
          {(provided) => (
            <div
              {...provided.droppableProps}
              ref={provided.innerRef}
              className="space-y-3"
            >
              {questions?.map((question, index) => (
                <Draggable
                  key={question.id}
                  draggableId={question.id}
                  index={index}
                >
                  {(provided, snapshot) => (
                    <div
                      ref={provided.innerRef}
                      {...provided.draggableProps}
                    >
                      <QuestionCard
                        question={question}
                        dragHandleProps={provided.dragHandleProps}
                        isDragging={snapshot.isDragging}
                        onEdit={() => {
                          setEditingQuestion(question)
                          setEditorOpen(true)
                        }}
                        onDelete={() => deleteMutation.mutate(question.id)}
                        onDuplicate={() => duplicateMutation.mutate(question.id)}
                      />
                    </div>
                  )}
                </Draggable>
              ))}
              {provided.placeholder}
            </div>
          )}
        </Droppable>
      </DragDropContext>

      {/* Editor Modal */}
      <QuestionEditor
        open={editorOpen}
        onClose={() => setEditorOpen(false)}
        question={editingQuestion}
        categoryId={categoryId}
      />
    </div>
  )
}
```

---

### **2. QuestionCard - Einzelne Frage**

```typescript
// components/admin/QuestionCard.tsx

'use client'

import { useState } from 'react'
import { Card } from '@/components/ui/card'
import { Button } from '@/components/ui/button'
import { GripVertical, Edit, Copy, Trash2, Eye, ChevronDown } from 'lucide-react'
import { Badge } from '@/components/ui/badge'

interface QuestionCardProps {
  question: any
  dragHandleProps: any
  isDragging: boolean
  onEdit: () => void
  onDelete: () => void
  onDuplicate: () => void
}

export function QuestionCard({
  question,
  dragHandleProps,
  isDragging,
  onEdit,
  onDelete,
  onDuplicate
}: QuestionCardProps) {
  const [expanded, setExpanded] = useState(false)

  const analytics = question._analytics?.[0] || {}

  return (
    <Card className={`p-4 transition-shadow ${isDragging ? 'shadow-2xl' : ''}`}>
      <div className="flex gap-3">
        {/* Drag Handle */}
        <div {...dragHandleProps} className="cursor-grab active:cursor-grabbing">
          <GripVertical className="w-5 h-5 text-gray-400" />
        </div>

        {/* Content */}
        <div className="flex-1">
          {/* Header */}
          <div className="flex items-start justify-between mb-2">
            <div className="flex-1">
              <div className="flex items-center gap-2 mb-1">
                <span className="text-sm text-gray-500">
                  {question.priority}.
                </span>
                <h3 className="font-medium">{question.question_text}</h3>
              </div>
              <div className="flex gap-2 items-center">
                <Badge variant="outline">{question.question_type}</Badge>
                {question.is_optional && (
                  <Badge variant="secondary">Optional</Badge>
                )}
                {question.options?.length > 0 && (
                  <span className="text-xs text-gray-500">
                    {question.options.length} Optionen
                  </span>
                )}
              </div>
            </div>

            {/* Actions */}
            <div className="flex gap-1">
              <Button variant="ghost" size="sm" onClick={onEdit}>
                <Edit className="w-4 h-4" />
              </Button>
              <Button variant="ghost" size="sm" onClick={onDuplicate}>
                <Copy className="w-4 h-4" />
              </Button>
              <Button variant="ghost" size="sm" onClick={onDelete}>
                <Trash2 className="w-4 h-4 text-red-500" />
              </Button>
              <Button
                variant="ghost"
                size="sm"
                onClick={() => setExpanded(!expanded)}
              >
                <ChevronDown className={`w-4 h-4 transition-transform ${expanded ? 'rotate-180' : ''}`} />
              </Button>
            </div>
          </div>

          {/* Analytics Preview */}
          {analytics.answer_rate_percent !== undefined && (
            <div className="flex gap-4 text-sm">
              <div>
                <span className="text-gray-500">Antwort-Rate:</span>{' '}
                <span className={`font-medium ${
                  analytics.answer_rate_percent >= 80 ? 'text-green-600' :
                  analytics.answer_rate_percent >= 60 ? 'text-yellow-600' :
                  'text-red-600'
                }`}>
                  {analytics.answer_rate_percent}%
                </span>
              </div>
              <div>
                <span className="text-gray-500">Ã˜ Zeit:</span>{' '}
                <span className="font-medium">{analytics.avg_time?.toFixed(1)}s</span>
              </div>
            </div>
          )}

          {/* Expanded Details */}
          {expanded && (
            <div className="mt-3 pt-3 border-t space-y-2">
              {question.help_text && (
                <div>
                  <span className="text-sm text-gray-500">Hilfetext:</span>
                  <p className="text-sm">{question.help_text}</p>
                </div>
              )}

              {question.options?.length > 0 && (
                <div>
                  <span className="text-sm text-gray-500">Optionen:</span>
                  <div className="flex flex-wrap gap-1 mt-1">
                    {question.options.map((opt, i) => (
                      <Badge key={i} variant="outline">{opt}</Badge>
                    ))}
                  </div>
                </div>
              )}

              {question.conditional_logic?.showIf && (
                <div>
                  <span className="text-sm text-gray-500">Conditional Logic:</span>
                  <p className="text-sm font-mono bg-gray-50 p-2 rounded">
                    {JSON.stringify(question.conditional_logic, null, 2)}
                  </p>
                </div>
              )}

              {analytics.total_answered > 0 && (
                <div>
                  <span className="text-sm text-gray-500">Statistik (30 Tage):</span>
                  <div className="grid grid-cols-3 gap-2 mt-1">
                    <div className="text-sm">
                      <div className="text-gray-500">Gezeigt</div>
                      <div className="font-medium">{analytics.total_shown}</div>
                    </div>
                    <div className="text-sm">
                      <div className="text-gray-500">Beantwortet</div>
                      <div className="font-medium">{analytics.total_answered}</div>
                    </div>
                    <div className="text-sm">
                      <div className="text-gray-500">Ãœbersprungen</div>
                      <div className="font-medium">{analytics.total_skipped}</div>
                    </div>
                  </div>
                </div>
              )}
            </div>
          )}
        </div>
      </div>
    </Card>
  )
}
```

---

### **3. QuestionEditor - Split-View Editor**

```typescript
// components/admin/QuestionEditor.tsx

'use client'

import { useState, useEffect } from 'react'
import { Dialog, DialogContent, DialogTitle } from '@/components/ui/dialog'
import { Input } from '@/components/ui/input'
import { Label } from '@/components/ui/label'
import { Textarea } from '@/components/ui/textarea'
import { Button } from '@/components/ui/button'
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'
import { Switch } from '@/components/ui/switch'
import { QuestionPreview } from './QuestionPreview'
import { DraggableOptions } from './DraggableOptions'
import { useMutation, useQueryClient } from '@tanstack/react-query'

interface QuestionEditorProps {
  open: boolean
  onClose: () => void
  question: any
  categoryId: string
}

export function QuestionEditor({
  open,
  onClose,
  question,
  categoryId
}: QuestionEditorProps) {
  const queryClient = useQueryClient()
  const isEditing = !!question

  const [formData, setFormData] = useState({
    question_text: '',
    question_type: 'chips',
    options: [],
    is_optional: true,
    help_text: '',
    placeholder: '',
    conditional_logic: {},
    follow_up_question: null,
    tags: []
  })

  useEffect(() => {
    if (question) {
      setFormData(question)
    } else {
      // Reset for new question
      setFormData({
        question_text: '',
        question_type: 'chips',
        options: [],
        is_optional: true,
        help_text: '',
        placeholder: '',
        conditional_logic: {},
        follow_up_question: null,
        tags: []
      })
    }
  }, [question, open])

  const saveMutation = useMutation({
    mutationFn: async (data: any) => {
      const url = isEditing
        ? `/api/admin/questions/${question.id}`
        : `/api/admin/questions`

      return fetch(url, {
        method: isEditing ? 'PATCH' : 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          ...data,
          category_id: categoryId
        })
      }).then(r => r.json())
    },
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['questions', categoryId] })
      onClose()
    }
  })

  const handleSave = () => {
    saveMutation.mutate(formData)
  }

  return (
    <Dialog open={open} onOpenChange={onClose}>
      <DialogContent className="max-w-6xl h-[90vh]">
        <DialogTitle>
          {isEditing ? 'Frage bearbeiten' : 'Neue Frage'}
        </DialogTitle>

        <div className="grid grid-cols-2 gap-6 h-full overflow-hidden">
          {/* LEFT: Form */}
          <div className="space-y-4 overflow-y-auto pr-4">
            <div>
              <Label>Frage-Text *</Label>
              <Textarea
                value={formData.question_text}
                onChange={(e) => setFormData({ ...formData, question_text: e.target.value })}
                placeholder="z.B. Wie hat sich das Objekt bewegt?"
                rows={2}
              />
            </div>

            <div>
              <Label>Frage-Typ *</Label>
              <Select
                value={formData.question_type}
                onValueChange={(value) => setFormData({ ...formData, question_type: value })}
              >
                <SelectTrigger>
                  <SelectValue />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="chips">Chips (Single-Select)</SelectItem>
                  <SelectItem value="chips-multi">Chips (Multi-Select)</SelectItem>
                  <SelectItem value="text">Text</SelectItem>
                  <SelectItem value="boolean">Boolean (Ja/Nein)</SelectItem>
                  <SelectItem value="slider">Slider</SelectItem>
                  <SelectItem value="date">Datum</SelectItem>
                  <SelectItem value="time">Zeit</SelectItem>
                </SelectContent>
              </Select>
            </div>

            {['chips', 'chips-multi'].includes(formData.question_type) && (
              <div>
                <Label>Optionen (Drag zum Sortieren)</Label>
                <DraggableOptions
                  options={formData.options}
                  onChange={(newOptions) => setFormData({ ...formData, options: newOptions })}
                />
              </div>
            )}

            <div className="flex items-center gap-2">
              <Switch
                checked={formData.is_optional}
                onCheckedChange={(checked) => setFormData({ ...formData, is_optional: checked })}
              />
              <Label>Optional (nicht verpflichtend)</Label>
            </div>

            <div>
              <Label>Hilfetext (optional)</Label>
              <Textarea
                value={formData.help_text}
                onChange={(e) => setFormData({ ...formData, help_text: e.target.value })}
                placeholder="ZusÃ¤tzliche ErklÃ¤rung..."
                rows={2}
              />
            </div>

            {formData.question_type === 'text' && (
              <div>
                <Label>Placeholder</Label>
                <Input
                  value={formData.placeholder}
                  onChange={(e) => setFormData({ ...formData, placeholder: e.target.value })}
                  placeholder="z.B. 'Beschreibe genauer...'"
                />
              </div>
            )}

            {/* Erweitert Section */}
            <details className="border rounded p-3">
              <summary className="cursor-pointer font-medium">
                Erweiterte Einstellungen
              </summary>
              <div className="space-y-3 mt-3">
                <div>
                  <Label>Tags (fÃ¼r Suche)</Label>
                  <Input
                    placeholder="bewegung, ufo, sichtung"
                    value={formData.tags?.join(', ')}
                    onChange={(e) => setFormData({
                      ...formData,
                      tags: e.target.value.split(',').map(t => t.trim())
                    })}
                  />
                </div>

                <div>
                  <Label>Conditional Logic (JSON)</Label>
                  <Textarea
                    value={JSON.stringify(formData.conditional_logic, null, 2)}
                    onChange={(e) => {
                      try {
                        setFormData({ ...formData, conditional_logic: JSON.parse(e.target.value) })
                      } catch (err) {
                        // Invalid JSON
                      }
                    }}
                    rows={4}
                    className="font-mono text-xs"
                  />
                </div>
              </div>
            </details>
          </div>

          {/* RIGHT: Live Preview */}
          <div className="border-l pl-6 overflow-y-auto">
            <div className="sticky top-0 bg-white pb-4">
              <h3 className="font-medium mb-2">ğŸ¨ Live-Preview</h3>
              <p className="text-sm text-gray-500 mb-4">
                So sieht der User die Frage
              </p>
            </div>

            <QuestionPreview question={formData} />
          </div>
        </div>

        {/* Footer */}
        <div className="flex justify-between pt-4 border-t">
          <Button variant="outline" onClick={onClose}>
            Abbrechen
          </Button>
          <div className="flex gap-2">
            <Button onClick={handleSave} disabled={saveMutation.isPending}>
              {saveMutation.isPending ? 'Speichern...' : 'Speichern'}
            </Button>
          </div>
        </div>
      </DialogContent>
    </Dialog>
  )
}
```

---

### **4. DraggableOptions - Optionen sortieren**

```typescript
// components/admin/DraggableOptions.tsx

'use client'

import { DragDropContext, Droppable, Draggable, DropResult } from '@hello-pangea/dnd'
import { GripVertical, X } from 'lucide-react'
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import { useState } from 'react'

interface DraggableOptionsProps {
  options: string[]
  onChange: (options: string[]) => void
}

export function DraggableOptions({ options, onChange }: DraggableOptionsProps) {
  const [newOption, setNewOption] = useState('')

  const handleDragEnd = (result: DropResult) => {
    if (!result.destination) return

    const items = Array.from(options)
    const [reorderedItem] = items.splice(result.source.index, 1)
    items.splice(result.destination.index, 0, reorderedItem)

    onChange(items)
  }

  const addOption = () => {
    if (newOption.trim()) {
      onChange([...options, newOption.trim()])
      setNewOption('')
    }
  }

  const removeOption = (index: number) => {
    onChange(options.filter((_, i) => i !== index))
  }

  return (
    <div className="space-y-2">
      <DragDropContext onDragEnd={handleDragEnd}>
        <Droppable droppableId="options">
          {(provided) => (
            <div {...provided.droppableProps} ref={provided.innerRef} className="space-y-1">
              {options.map((option, index) => (
                <Draggable key={index} draggableId={`option-${index}`} index={index}>
                  {(provided) => (
                    <div
                      ref={provided.innerRef}
                      {...provided.draggableProps}
                      className="flex items-center gap-2 bg-gray-50 p-2 rounded"
                    >
                      <div {...provided.dragHandleProps}>
                        <GripVertical className="w-4 h-4 text-gray-400" />
                      </div>
                      <span className="flex-1">{option}</span>
                      <Button
                        variant="ghost"
                        size="sm"
                        onClick={() => removeOption(index)}
                      >
                        <X className="w-4 h-4" />
                      </Button>
                    </div>
                  )}
                </Draggable>
              ))}
              {provided.placeholder}
            </div>
          )}
        </Droppable>
      </DragDropContext>

      <div className="flex gap-2">
        <Input
          value={newOption}
          onChange={(e) => setNewOption(e.target.value)}
          placeholder="Neue Option..."
          onKeyDown={(e) => {
            if (e.key === 'Enter') {
              e.preventDefault()
              addOption()
            }
          }}
        />
        <Button onClick={addOption}>+ Option</Button>
      </div>
    </div>
  )
}
```

---

### **5. QuestionPreview - User-Ansicht**

```typescript
// components/admin/QuestionPreview.tsx

'use client'

import { Badge } from '@/components/ui/badge'
import { Input } from '@/components/ui/input'
import { Textarea } from '@/components/ui/textarea'
import { Slider } from '@/components/ui/slider'

interface QuestionPreviewProps {
  question: any
}

export function QuestionPreview({ question }: QuestionPreviewProps) {
  return (
    <div className="border rounded-lg p-6 bg-white shadow-sm">
      <div className="space-y-4">
        <div>
          <h4 className="font-medium mb-2">{question.question_text || 'Frage-Text hier...'}</h4>
          {question.help_text && (
            <p className="text-sm text-gray-500 mb-3">ğŸ’¡ {question.help_text}</p>
          )}
        </div>

        {/* Render based on type */}
        {['chips', 'chips-multi'].includes(question.question_type) && (
          <div className="flex flex-wrap gap-2">
            {question.options?.length > 0 ? (
              question.options.map((opt, i) => (
                <Badge
                  key={i}
                  variant="outline"
                  className="cursor-pointer hover:bg-gray-100 px-4 py-2"
                >
                  {opt}
                </Badge>
              ))
            ) : (
              <p className="text-sm text-gray-400">Keine Optionen definiert</p>
            )}
          </div>
        )}

        {question.question_type === 'text' && (
          <Textarea
            placeholder={question.placeholder || 'Deine Antwort...'}
            disabled
            rows={3}
          />
        )}

        {question.question_type === 'boolean' && (
          <div className="flex gap-3">
            <Badge variant="outline" className="cursor-pointer px-6 py-2">Ja</Badge>
            <Badge variant="outline" className="cursor-pointer px-6 py-2">Nein</Badge>
          </div>
        )}

        {question.question_type === 'slider' && (
          <div className="pt-2">
            <Slider defaultValue={[50]} max={100} step={1} disabled />
          </div>
        )}

        {question.question_type === 'date' && (
          <Input type="date" disabled />
        )}

        {question.question_type === 'time' && (
          <Input type="time" disabled />
        )}

        {question.is_optional && (
          <p className="text-xs text-gray-400 mt-3">Optional - kann Ã¼bersprungen werden</p>
        )}
      </div>
    </div>
  )
}
```

---

## ğŸ¯ Drag & Drop Implementation-Guide

### **Setup**

```bash
npm install @hello-pangea/dnd
```

### **Best Practices**

1. **Optimistic Updates**: Update UI sofort, Server spÃ¤ter
2. **Drag Handle**: Nur Ã¼ber Handle ziehen (nicht ganze Card)
3. **Visual Feedback**: isDragging â†’ Shadow/Opacity Ã¤ndern
4. **Auto-Save**: Bei Drag End â†’ sofort speichern
5. **Error Handling**: Bei Fehler â†’ Rollback zur alten Reihenfolge

### **Performance-Optimierung**

```typescript
// 1. Virtualisierung bei vielen Items (>50)
import { FixedSizeList } from 'react-window'

// 2. Memoization
import { memo } from 'react'

const QuestionCard = memo(({ question, ... }) => {
  // ...
})

// 3. Debounce bei Server-Updates
import { debounce } from 'lodash'

const debouncedSave = debounce(async (order) => {
  await saveOrder(order)
}, 500)
```

---

## ğŸ§ª Testing-Strategie

### **1. Unit Tests (Vitest + React Testing Library)**

```typescript
// tests/QuestionManager.test.tsx

import { render, screen, fireEvent } from '@testing-library/react'
import { QuestionManager } from '@/components/admin/QuestionManager'
import { QueryClient, QueryClientProvider } from '@tanstack/react-query'

describe('QuestionManager', () => {
  it('renders questions list', async () => {
    const queryClient = new QueryClient()

    render(
      <QueryClientProvider client={queryClient}>
        <QuestionManager categoryId="test-123" />
      </QueryClientProvider>
    )

    expect(await screen.findByText('Fragen')).toBeInTheDocument()
  })

  it('opens editor when clicking "Neue Frage"', () => {
    render(<QuestionManager categoryId="test-123" />)

    fireEvent.click(screen.getByText('+ Neue Frage'))

    expect(screen.getByText('Neue Frage')).toBeInTheDocument()
  })
})
```

### **2. Integration Tests (Playwright)**

```typescript
// tests/e2e/admin-flow.spec.ts

import { test, expect } from '@playwright/test'

test('admin can create and reorder questions', async ({ page }) => {
  await page.goto('/admin/categories/ufo')

  // Create question
  await page.click('text=+ Neue Frage')
  await page.fill('textarea[name="question_text"]', 'Test-Frage')
  await page.selectOption('select[name="question_type"]', 'chips')
  await page.click('text=Speichern')

  // Verify created
  await expect(page.locator('text=Test-Frage')).toBeVisible()

  // Test drag & drop
  const firstQuestion = page.locator('[data-rbd-draggable-id]').first()
  const secondQuestion = page.locator('[data-rbd-draggable-id]').nth(1)

  await firstQuestion.dragTo(secondQuestion)

  // Verify reordered
  await expect(page.locator('[data-rbd-draggable-id]').first()).not.toContainText('Test-Frage')
})
```

### **3. API Tests**

```typescript
// tests/api/questions.test.ts

import { describe, it, expect } from 'vitest'

describe('Question API', () => {
  it('creates question with valid data', async () => {
    const response = await fetch('/api/admin/questions', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        category_id: 'test-123',
        question_text: 'Test?',
        question_type: 'chips',
        options: ['A', 'B'],
        is_optional: true
      })
    })

    expect(response.status).toBe(200)
    const data = await response.json()
    expect(data.question_text).toBe('Test?')
  })

  it('rejects invalid question type', async () => {
    const response = await fetch('/api/admin/questions', {
      method: 'POST',
      body: JSON.stringify({
        question_type: 'invalid-type'
      })
    })

    expect(response.status).toBe(400)
  })
})
```

### **4. Permission Tests**

```typescript
// tests/permissions.test.ts

describe('Admin Permissions', () => {
  it('analyst cannot create questions', async () => {
    // Login as analyst
    const response = await fetch('/api/admin/questions', {
      method: 'POST',
      headers: { 'Authorization': 'Bearer analyst-token' }
    })

    expect(response.status).toBe(403)
  })

  it('content manager can create questions', async () => {
    const response = await fetch('/api/admin/questions', {
      method: 'POST',
      headers: { 'Authorization': 'Bearer content-manager-token' }
    })

    expect(response.status).not.toBe(403)
  })
})
```

---

## ğŸš€ Deployment-Guide

### **1. Datenbank Setup (Supabase)**

```bash
# 1. Supabase Projekt erstellen
# https://supabase.com

# 2. SQL-Schema ausfÃ¼hren
# In Supabase Dashboard â†’ SQL Editor â†’ komplettes Schema einfÃ¼gen

# 3. Environment Variables
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGc...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGc... # fÃ¼r Server-Side
```

### **2. Erste Admin-User erstellen**

```sql
-- In Supabase SQL Editor

-- 1. User registrieren (via Supabase Auth UI oder API)
-- 2. User ID kopieren

-- 3. Als Super-Admin setzen
INSERT INTO admin_users (user_id, role, granted_by)
VALUES (
  'user-uuid-hier',
  'super_admin',
  'user-uuid-hier' -- self-granted
);
```

### **3. Vercel Deployment**

```bash
# 1. GitHub Repo pushen
git add .
git commit -m "Admin Panel implemented"
git push

# 2. Vercel Setup
npm i -g vercel
vercel login
vercel

# 3. Environment Variables in Vercel setzen
vercel env add NEXT_PUBLIC_SUPABASE_URL
vercel env add NEXT_PUBLIC_SUPABASE_ANON_KEY
vercel env add SUPABASE_SERVICE_ROLE_KEY

# 4. Deploy
vercel --prod
```

### **4. Initial Data Setup**

```typescript
// scripts/seed-admin.ts

import { createClient } from '@supabase/supabase-js'

const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.SUPABASE_SERVICE_ROLE_KEY!
)

async function seedCategories() {
  const categories = [
    { slug: 'ufo', name: 'UFO-Sichtungen', icon: 'ğŸ›¸', sort_order: 1 },
    { slug: 'paranormal', name: 'Paranormal', icon: 'ğŸ‘»', sort_order: 2 },
    { slug: 'dreams', name: 'TrÃ¤ume', icon: 'ğŸ’­', sort_order: 3 },
    // ... mehr
  ]

  for (const cat of categories) {
    await supabase.from('question_categories').insert(cat)
  }

  console.log('âœ… Kategorien erstellt')
}

async function seedSystemTemplates() {
  const templates = [
    {
      name: 'Standard: Ort & Zeit',
      description: 'Basis-Fragen fÃ¼r Ort und Zeit',
      questions: [
        {
          question_text: 'Wo ist das passiert?',
          question_type: 'text',
          priority: 1,
          is_optional: true
        },
        // ...
      ],
      is_public: true
    }
  ]

  for (const tpl of templates) {
    await supabase.from('question_templates').insert(tpl)
  }

  console.log('âœ… Templates erstellt')
}

// Run
seedCategories()
seedSystemTemplates()
```

```bash
# AusfÃ¼hren
npx tsx scripts/seed-admin.ts
```

### **5. Monitoring & Analytics**

```typescript
// lib/monitoring.ts

import * as Sentry from '@sentry/nextjs'

export function trackAdminAction(action: string, data: any) {
  Sentry.addBreadcrumb({
    category: 'admin',
    message: action,
    data,
    level: 'info'
  })
}

// Usage in components
trackAdminAction('question_created', { questionId: '...' })
```

### **6. Backup-Strategie**

```bash
# 1. Supabase Auto-Backups aktivieren
# (in Supabase Dashboard â†’ Settings â†’ Backups)

# 2. WÃ¶chentliche JSON-Exports
# Cron-Job (via Vercel Cron oder GitHub Actions)

# scripts/backup.ts
async function backupAllQuestions() {
  const { data } = await supabase
    .from('dynamic_questions')
    .select('*')

  await fs.writeFile(
    `backups/questions-${Date.now()}.json`,
    JSON.stringify(data, null, 2)
  )
}
```

### **7. Performance-Optimierung**

```typescript
// 1. Materialized View tÃ¤glich refreshen
// Supabase Cron (pg_cron extension)

SELECT cron.schedule(
  'refresh-analytics-summary',
  '0 2 * * *', -- TÃ¤glich 02:00 Uhr
  $$REFRESH MATERIALIZED VIEW CONCURRENTLY question_analytics_summary$$
);

// 2. CDN fÃ¼r Admin-Assets
// next.config.js
module.exports = {
  images: {
    domains: ['xxx.supabase.co']
  },
  // Enable static optimization
  output: 'standalone'
}

// 3. React Query Cache-Config
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 1000 * 60 * 5, // 5 Minuten
      cacheTime: 1000 * 60 * 10 // 10 Minuten
    }
  }
})
```

---

## ğŸ“Š Entwicklungs-Timeline

### **Phase 1: Basis (Woche 1-2)**
- âœ… Datenbank-Schema
- âœ… API-Endpoints
- âœ… Basis-Components (QuestionManager, QuestionCard)
- âœ… Permissions-System

### **Phase 2: Drag & Drop (Woche 3)**
- âœ… Drag & Drop Integration
- âœ… Reorder-API
- âœ… Optimistic Updates

### **Phase 3: Editor (Woche 4)**
- âœ… QuestionEditor Modal
- âœ… Live-Preview
- âœ… Conditional Logic Builder

### **Phase 4: Analytics (Woche 5)**
- âœ… Analytics-Dashboard
- âœ… Charts (Recharts)
- âœ… AI-Insights
- âœ… Export-Funktionen

### **Phase 5: Templates & History (Woche 6)**
- âœ… Template-System
- âœ… Change-History
- âœ… Revert-Funktion
- âœ… Bulk-Operations

### **Phase 6: Testing & Deployment (Woche 7)**
- âœ… Unit Tests
- âœ… E2E Tests
- âœ… Deployment
- âœ… Monitoring

### **Phase 7: Polish (Woche 8)**
- âœ… UI-Refinements
- âœ… Performance-Optimierung
- âœ… Dokumentation
- âœ… Training fÃ¼r Content-Manager

**Gesamt: 8 Wochen (ca. 2 Monate)**

---

## ğŸ¯ Success Metrics

### **Funktional**
- âœ… Alle CRUD-Operationen funktionieren
- âœ… Drag & Drop ist smooth (<100ms response)
- âœ… Permissions sind korrekt implementiert
- âœ… Analytics sind akkurat
- âœ… Keine Data-Loss bei Revert

### **Performance**
- âœ… Page Load < 2s
- âœ… Question-Editor Ã¶ffnet < 300ms
- âœ… Reorder-Operation < 500ms
- âœ… Analytics-Dashboard lÃ¤dt < 3s

### **Usability**
- âœ… Content-Manager kann ohne Training arbeiten
- âœ… Fehler sind verstÃ¤ndlich
- âœ… Alle Aktionen sind undo-bar
- âœ… Mobile-responsive (Tablet-Support)

---

## ğŸš€ Phase 2 Features (Monat 5-6)

### **Multilingual Dynamic Questions** (siehe MULTILINGUAL-STRATEGY.md)

#### **Neue Tabelle: `question_translations`**

```sql
CREATE TABLE question_translations (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  question_id uuid REFERENCES dynamic_questions ON DELETE CASCADE,

  -- Sprache
  language text NOT NULL, -- 'de', 'en', 'fr', 'es'

  -- Ãœbersetzungen
  question_text text NOT NULL,
  help_text text,
  placeholder text,
  options jsonb, -- Ãœbersetzte Optionen (bei Chips-Typen)

  -- QualitÃ¤t
  quality_score float, -- 0.0 - 1.0 (AI-Translation-Quality)
  is_manual boolean DEFAULT false, -- Manuell Ã¼bersetzt?

  -- Metadaten
  created_at timestamptz DEFAULT now(),
  updated_at timestamptz DEFAULT now(),
  created_by uuid REFERENCES auth.users,

  UNIQUE(question_id, language)
);

CREATE INDEX question_translations_question_idx ON question_translations(question_id);
CREATE INDEX question_translations_language_idx ON question_translations(language);
```

#### **Admin-UI Erweiterung**

**Screen: Question-Editor â†’ Tab "Ãœbersetzungen"**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frage bearbeiten                               âœ•       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Formular] [Ãœbersetzungen]                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                          â”‚                              â”‚
â”‚ ğŸŒ Ãœbersetzungen         â”‚  Original (DE):              â”‚
â”‚                          â”‚  "Wie hat sich das Objekt    â”‚
â”‚ â”Œâ”€ EN (Englisch) â”€â”€â”€â”€â”€â”€â”â”‚   bewegt?"                   â”‚
â”‚ â”‚ Question Text:       â”‚â”‚                              â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚  Preview:                    â”‚
â”‚ â”‚ â”‚ How did the      â”‚ â”‚â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â”‚ object move?     â”‚ â”‚â”‚  â”‚ How did the object     â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚  â”‚ move?                  â”‚ â”‚
â”‚ â”‚                      â”‚â”‚  â”‚                        â”‚ â”‚
â”‚ â”‚ Options:             â”‚â”‚  â”‚ [Hovering] [Fast]      â”‚ â”‚
â”‚ â”‚ â€¢ Hovering           â”‚â”‚  â”‚ [Zigzag] [Static]      â”‚ â”‚
â”‚ â”‚ â€¢ Fast               â”‚â”‚  â”‚ [Other]                â”‚ â”‚
â”‚ â”‚ â€¢ Zigzag             â”‚â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”‚ â€¢ Static             â”‚â”‚                              â”‚
â”‚ â”‚ â€¢ Other              â”‚â”‚  Quality: â­â­â­â­ 95%       â”‚
â”‚ â”‚                      â”‚â”‚  âœ… Manual                   â”‚
â”‚ â”‚ âœ… Manuelle Ãœbersetzungâ”‚                              â”‚
â”‚ â”‚ [ğŸ’¾ Speichern]       â”‚â”‚                              â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚                              â”‚
â”‚                          â”‚                              â”‚
â”‚ â”Œâ”€ FR (FranzÃ¶sisch) â”€â”€â”€â”â”‚                              â”‚
â”‚ â”‚ [ğŸ¤– Auto-Translate]  â”‚â”‚                              â”‚
â”‚ â”‚ Quality: â­â­â­ 85%    â”‚â”‚                              â”‚
â”‚ â”‚ AI-generiert         â”‚â”‚                              â”‚
â”‚ â”‚ [âœ Manuell editieren]â”‚â”‚                              â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚                              â”‚
â”‚                          â”‚                              â”‚
â”‚ â”Œâ”€ ES (Spanisch) â”€â”€â”€â”€â”€â”â”‚                              â”‚
â”‚ â”‚ Noch nicht Ã¼bersetzt â”‚â”‚                              â”‚
â”‚ â”‚ [+ HinzufÃ¼gen]       â”‚â”‚                              â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚                              â”‚
â”‚                          â”‚                              â”‚
â”‚ [Alle Sprachen Ã¼bersetzen]                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### **API-Endpoint: `/api/admin/questions/:id/translate`**

```typescript
// POST /api/admin/questions/:id/translate
export async function POST(
  req: Request,
  { params }: { params: { id: string } }
) {
  const { user } = await requireAdmin(req, 'content_manager')
  const { targetLanguages } = await req.json() // ['en', 'fr', 'es']

  const { data: question } = await supabase
    .from('dynamic_questions')
    .select('*')
    .eq('id', params.id)
    .single()

  const translations = await Promise.all(
    targetLanguages.map(async (lang) => {
      // OpenAI Translation
      const translated = await translateQuestion(question, lang)

      return supabase.from('question_translations').upsert({
        question_id: params.id,
        language: lang,
        question_text: translated.question_text,
        help_text: translated.help_text,
        options: translated.options,
        quality_score: translated.quality_score,
        is_manual: false,
        created_by: user.id
      })
    })
  )

  return Response.json({ success: true, translations })
}
```

#### **Permissions**

âœ… **Content-Manager**:
- Kann manuelle Ãœbersetzungen erstellen/editieren
- Kann AI-Ãœbersetzungen reviewen & korrigieren
- Kann AI-Ãœbersetzungen triggern

âŒ **Analyst**:
- Kann Ãœbersetzungen nur ansehen (read-only)

#### **User-Facing Integration**

Wenn User Experience submitted:
```typescript
// Frontend: Hole Fragen in User-Sprache
const userLang = navigator.language.split('-')[0] // 'fr'

const { data: questions } = await supabase
  .from('dynamic_questions')
  .select(`
    *,
    translations:question_translations!left(*)
  `)
  .eq('category_id', categoryId)
  .order('priority')

// Zeige Ã¼bersetzt (falls vorhanden)
questions.forEach(q => {
  const translation = q.translations.find(t => t.language === userLang)

  if (translation) {
    q.question_text = translation.question_text
    q.options = translation.options || q.options
  }
  // Sonst: Fallback auf Original (DE)
})
```

---

## ğŸ¤– AI-Adaptive Questions (Phase 2 Feature)

### **Admin-UI: Adaptive-Editor**

**Screen: Question-Editor â†’ Tab "AI-Adaptive"**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frage bearbeiten                               âœ•       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Formular] [Ãœbersetzungen] [AI-Adaptive]               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                          â”‚                              â”‚
â”‚ ğŸ¤– AI-Adaptive Follow-Upsâ”‚  Original-Frage:             â”‚
â”‚                          â”‚  "GerÃ¤usche gehÃ¶rt?"         â”‚
â”‚ â˜‘ï¸ Aktivieren            â”‚  Typ: Chips                  â”‚
â”‚                          â”‚  Optionen: Summend, Lautlos,â”‚
â”‚ â”Œâ”€ Bedingung 1 â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚           Pfeifend           â”‚
â”‚ â”‚ Wenn User wÃ¤hlt:     â”‚â”‚                              â”‚
â”‚ â”‚ [Lautlos â–¼]          â”‚â”‚  Preview AI-Follow-Up:       â”‚
â”‚ â”‚                      â”‚â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ GPT-Prompt:          â”‚â”‚  â”‚ "Hast du Vibrationen   â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚  â”‚  gespÃ¼rt?"             â”‚ â”‚
â”‚ â”‚ â”‚ Frage ob         â”‚ â”‚â”‚  â”‚                        â”‚ â”‚
â”‚ â”‚ â”‚ Vibrationen      â”‚ â”‚â”‚  â”‚ â—‹ Ja                   â”‚ â”‚
â”‚ â”‚ â”‚ wahrgenommen     â”‚ â”‚â”‚  â”‚ â—‹ Nein                 â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”‚                      â”‚â”‚                              â”‚
â”‚ â”‚ Follow-Up-Typ:       â”‚â”‚  Kosten-SchÃ¤tzung:           â”‚
â”‚ â”‚ [Yes/No â–¼]           â”‚â”‚  ~$0.0001 pro Follow-Up      â”‚
â”‚ â”‚                      â”‚â”‚  (GPT-4o-mini)               â”‚
â”‚ â”‚ [âœ• Entfernen]        â”‚â”‚                              â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚                              â”‚
â”‚                          â”‚                              â”‚
â”‚ â”Œâ”€ Bedingung 2 â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚                              â”‚
â”‚ â”‚ Wenn User wÃ¤hlt:     â”‚â”‚                              â”‚
â”‚ â”‚ [Schnell â–¼]          â”‚â”‚                              â”‚
â”‚ â”‚                      â”‚â”‚                              â”‚
â”‚ â”‚ GPT-Prompt:          â”‚â”‚                              â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚                              â”‚
â”‚ â”‚ â”‚ Frage nach       â”‚ â”‚â”‚                              â”‚
â”‚ â”‚ â”‚ Geschwindigkeit  â”‚ â”‚â”‚                              â”‚
â”‚ â”‚ â”‚ in km/h          â”‚ â”‚â”‚                              â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚                              â”‚
â”‚ â”‚                      â”‚â”‚                              â”‚
â”‚ â”‚ Follow-Up-Typ:       â”‚â”‚                              â”‚
â”‚ â”‚ [Slider â–¼]           â”‚â”‚                              â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚                              â”‚
â”‚                          â”‚                              â”‚
â”‚ [+ Bedingung hinzufÃ¼gen] â”‚                              â”‚
â”‚ [ğŸ’¾ Speichern]           â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Runtime-Logik (User-Facing)**

```typescript
// api/questions/generate-follow-up.ts
export async function POST(req: Request) {
  const { questionId, userAnswer, experienceContext } = await req.json()

  // Lade Frage mit Adaptive-Config
  const { data: question } = await supabase
    .from('dynamic_questions')
    .select('*')
    .eq('id', questionId)
    .single()

  if (!question.ai_adaptive) {
    return Response.json({ followUp: null })
  }

  // Finde passende Bedingung
  const condition = question.adaptive_conditions.find(
    c => c.trigger_answer === userAnswer
  )

  if (!condition) {
    return Response.json({ followUp: null })
  }

  // GPT-4o-mini generiert Follow-Up
  const completion = await openai.chat.completions.create({
    model: 'gpt-4o-mini',
    messages: [
      {
        role: 'system',
        content: `Du bist Experte fÃ¼r Follow-Up-Fragen. Generiere eine prÃ¤zise, kurze Frage basierend auf dem Kontext.`
      },
      {
        role: 'user',
        content: `
Original-Frage: "${question.question_text}"
User-Antwort: "${userAnswer}"
Kontext: "${experienceContext}"

Aufgabe: ${condition.follow_up_prompt}

Generiere eine kurze, prÃ¤zise Follow-Up-Frage (max 10 WÃ¶rter).
`
      }
    ],
    temperature: 0.7,
    max_tokens: 50
  })

  const generatedQuestion = completion.choices[0].message.content

  // Speichere in DB
  const { data: aiQuestion } = await supabase
    .from('ai_generated_questions')
    .insert({
      parent_question_id: questionId,
      experience_id: req.headers.get('x-experience-id'),
      user_answer: userAnswer,
      generated_question: generatedQuestion,
      question_type: condition.follow_up_type
    })
    .select()
    .single()

  return Response.json({
    followUp: {
      id: aiQuestion.id,
      question: generatedQuestion,
      type: condition.follow_up_type,
      options: condition.options || null
    }
  })
}
```

### **Frontend: Screen 4 Integration**

```tsx
// Screen 4: Dynamic Questions
export function DynamicQuestions({ category, experienceContent }) {
  const [currentQuestion, setCurrentQuestion] = useState(0)
  const [answers, setAnswers] = useState({})
  const [aiFollowUp, setAiFollowUp] = useState(null)

  const handleAnswer = async (questionId, answer) => {
    setAnswers({ ...answers, [questionId]: answer })

    // PrÃ¼fe ob AI-Follow-Up
    const followUp = await fetch('/api/questions/generate-follow-up', {
      method: 'POST',
      body: JSON.stringify({
        questionId,
        userAnswer: answer,
        experienceContext: experienceContent
      })
    }).then(r => r.json())

    if (followUp.followUp) {
      setAiFollowUp(followUp.followUp)
    } else {
      // NÃ¤chste Frage
      setCurrentQuestion(currentQuestion + 1)
    }
  }

  if (aiFollowUp) {
    return (
      <div className="ai-follow-up">
        <Badge>ğŸ¤– AI-Follow-Up</Badge>
        <QuestionDisplay
          question={aiFollowUp.question}
          type={aiFollowUp.type}
          onAnswer={(answer) => {
            // Speichere AI-Follow-Up-Antwort
            saveAiFollowUpAnswer(aiFollowUp.id, answer)
            setAiFollowUp(null)
            setCurrentQuestion(currentQuestion + 1)
          }}
        />
      </div>
    )
  }

  // Normale Fragen...
}
```

---

## ğŸ“š NÃ¤chste Schritte

1. **Jetzt starten**: Datenbank-Schema in Supabase ausfÃ¼hren
2. **API implementieren**: Alle Endpoints testen (Postman/Insomnia)
3. **UI bauen**: Component fÃ¼r Component
4. **Testen**: Unit + Integration Tests
5. **Deploy**: Vercel + Monitoring
6. **Iterate**: User-Feedback einholen
7. **Phase 2**: Multilingual Questions (Monat 5-6)

---

## ğŸ”— Cross-References

- **Database Schema:** Siehe [XP-SHARE-PROJECT-PLAN.md](./XP-SHARE-PROJECT-PLAN.md#database-schema)
- **Experience Answers:** `experience_answers`-Tabelle speichert User-Antworten
- **Multilingual Strategy:** [MULTILINGUAL-STRATEGY.md](./MULTILINGUAL-STRATEGY.md)
- **Experience Flow:** [EXPERIENCE-SUBMISSION-FLOW.md](./EXPERIENCE-SUBMISSION-FLOW.md)

---

**âœ… ADMIN-PANEL-SPEC IST VOLLSTÃ„NDIG!**

Alles bereit zum Implementieren. NÃ¤chster Schritt: Datenbank-Setup in Supabase.