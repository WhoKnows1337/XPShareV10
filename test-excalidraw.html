<!DOCTYPE html>
<html>
<head>
    <title>Excalidraw Scrollbar Test</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="https://esm.sh/@excalidraw/excalidraw@0.18.0/dist/excalidraw.min.css" />
    <script>
        window.EXCALIDRAW_ASSET_PATH = "https://esm.sh/@excalidraw/excalidraw@0.18.0/dist/";
    </script>
    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@18.2.0",
            "react-dom": "https://esm.sh/react-dom@18.2.0"
        }
    }
    </script>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }

        #container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background: white;
        }

        /* NUCLEAR OPTION: Kill ALL scrollbars everywhere in Excalidraw */
        .excalidraw,
        .excalidraw *,
        .excalidraw .excalidraw-canvas-container,
        .excalidraw .excalidraw-canvas-container *,
        .excalidraw canvas,
        .excalidraw .layer-ui,
        .excalidraw .layer-ui__wrapper {
            overflow: hidden !important;
            -ms-overflow-style: none !important;
            scrollbar-width: none !important;
        }

        /* Webkit scrollbar hiding */
        .excalidraw::-webkit-scrollbar,
        .excalidraw *::-webkit-scrollbar {
            display: none !important;
            width: 0 !important;
            height: 0 !important;
        }

        /* Force container dimensions */
        .excalidraw {
            width: 100vw !important;
            height: 100vh !important;
            max-width: 100vw !important;
            max-height: 100vh !important;
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            right: 0 !important;
            bottom: 0 !important;
        }

        /* Lock canvas container */
        .excalidraw .excalidraw-canvas-container {
            width: 100% !important;
            height: 100% !important;
            max-width: 100vw !important;
            max-height: 100vh !important;
            position: relative !important;
        }

        #test-info {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(255, 255, 0, 0.9);
            padding: 10px;
            z-index: 99999;
            font-family: monospace;
            font-size: 12px;
            max-width: 300px;
        }
    </style>
</head>
<body>
    <div id="test-info">
        <strong>Scrollbar Detection Test</strong><br>
        <div id="results">Loading...</div>
    </div>
    <div id="container"></div>

    <script type="module">
        import React from 'react';
        import ReactDOM from 'react-dom/client';
        import { Excalidraw } from 'https://esm.sh/@excalidraw/excalidraw@0.18.0';

        const App = () => {
            React.useEffect(() => {
                // Check for scrollbars after Excalidraw loads
                setTimeout(() => {
                    const results = [];
                    const excalidrawEl = document.querySelector('.excalidraw');
                    const canvasContainer = document.querySelector('.excalidraw-canvas-container');

                    if (excalidrawEl) {
                        const hasVerticalScroll = excalidrawEl.scrollHeight > excalidrawEl.clientHeight;
                        const hasHorizontalScroll = excalidrawEl.scrollWidth > excalidrawEl.clientWidth;
                        const computedStyle = window.getComputedStyle(excalidrawEl);

                        results.push(`Excalidraw Element:`);
                        results.push(`- Vertical scrollbar: ${hasVerticalScroll ? '❌ YES' : '✅ NO'}`);
                        results.push(`- Horizontal scrollbar: ${hasHorizontalScroll ? '❌ YES' : '✅ NO'}`);
                        results.push(`- overflow: ${computedStyle.overflow}`);
                        results.push(`- scrollbar-width: ${computedStyle.scrollbarWidth}`);
                        results.push(`- dimensions: ${excalidrawEl.clientWidth}x${excalidrawEl.clientHeight}`);
                    }

                    if (canvasContainer) {
                        const hasVerticalScroll = canvasContainer.scrollHeight > canvasContainer.clientHeight;
                        const hasHorizontalScroll = canvasContainer.scrollWidth > canvasContainer.clientWidth;
                        const computedStyle = window.getComputedStyle(canvasContainer);

                        results.push(`<br>Canvas Container:`);
                        results.push(`- Vertical scrollbar: ${hasVerticalScroll ? '❌ YES' : '✅ NO'}`);
                        results.push(`- Horizontal scrollbar: ${hasHorizontalScroll ? '❌ YES' : '✅ NO'}`);
                        results.push(`- overflow: ${computedStyle.overflow}`);
                    }

                    document.getElementById('results').innerHTML = results.join('<br>');
                }, 2000);
            }, []);

            return React.createElement(Excalidraw, {
                initialData: {
                    appState: {
                        viewBackgroundColor: '#ffffff',
                        zenModeEnabled: true,
                        gridSize: 0,
                        viewModeEnabled: false,
                        scrollToContent: false,
                    },
                    scrollToContent: false,
                }
            });
        };

        const root = ReactDOM.createRoot(document.getElementById('container'));
        root.render(React.createElement(App));
    </script>
</body>
</html>
